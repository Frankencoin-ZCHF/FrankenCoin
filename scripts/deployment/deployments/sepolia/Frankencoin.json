{
  "address": "0x73aDCc946149c273fB6db938C20CA42270c5C623",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_minApplicationPeriod",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "AlreadyRegistered",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "spender",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "allowance",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "needed",
          "type": "uint256"
        }
      ],
      "name": "ERC20InsufficientAllowance",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "balance",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "needed",
          "type": "uint256"
        }
      ],
      "name": "ERC20InsufficientBalance",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "FeeTooLow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotMinter",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "PeriodTooShort",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "TooLate",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "spender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "value",
          "type": "uint256"
        }
      ],
      "name": "Approval",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "reportingMinter",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "reserve",
          "type": "uint256"
        }
      ],
      "name": "Loss",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "minter",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "applicationPeriod",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "applicationFee",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "MinterApplied",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "minter",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "MinterDenied",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "minter",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "reserve",
          "type": "uint256"
        }
      ],
      "name": "Profit",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "from",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "value",
          "type": "uint256"
        }
      ],
      "name": "Transfer",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "DOMAIN_SEPARATOR",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MIN_APPLICATION_PERIOD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MIN_FEE",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "spender",
          "type": "address"
        }
      ],
      "name": "allowance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "spender",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "value",
          "type": "uint256"
        }
      ],
      "name": "approve",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "balanceOf",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "burn",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "burnFrom",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "targetTotalBurnAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint32",
          "name": "reservePPM",
          "type": "uint32"
        }
      ],
      "name": "burnFromWithReserve",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_amountExcludingReserve",
          "type": "uint256"
        },
        {
          "internalType": "uint32",
          "name": "_reservePPM",
          "type": "uint32"
        }
      ],
      "name": "burnWithReserve",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint32",
          "name": "reservePPM",
          "type": "uint32"
        }
      ],
      "name": "burnWithoutReserve",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "mintedAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint32",
          "name": "_reservePPM",
          "type": "uint32"
        }
      ],
      "name": "calculateAssignedReserve",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "amountExcludingReserve",
          "type": "uint256"
        },
        {
          "internalType": "uint32",
          "name": "reservePPM",
          "type": "uint32"
        }
      ],
      "name": "calculateFreedAmount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "decimals",
      "outputs": [
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_minter",
          "type": "address"
        },
        {
          "internalType": "address[]",
          "name": "_helpers",
          "type": "address[]"
        },
        {
          "internalType": "string",
          "name": "_message",
          "type": "string"
        }
      ],
      "name": "denyMinter",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "equity",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_position",
          "type": "address"
        }
      ],
      "name": "getPositionParent",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_minter",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "_message",
          "type": "string"
        }
      ],
      "name": "initialize",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_minter",
          "type": "address"
        }
      ],
      "name": "isMinter",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_target",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "mint",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_target",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "uint32",
          "name": "_reservePPM",
          "type": "uint32"
        },
        {
          "internalType": "uint32",
          "name": "_feesPPM",
          "type": "uint32"
        }
      ],
      "name": "mintWithReserve",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "minterReserve",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "minter",
          "type": "address"
        }
      ],
      "name": "minters",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "validityStart",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "name",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "nonces",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "nonce",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "notifyLoss",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "spender",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "value",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "deadline",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "v",
          "type": "uint8"
        },
        {
          "internalType": "bytes32",
          "name": "r",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "s",
          "type": "bytes32"
        }
      ],
      "name": "permit",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "position",
          "type": "address"
        }
      ],
      "name": "positions",
      "outputs": [
        {
          "internalType": "address",
          "name": "registeringMinter",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_position",
          "type": "address"
        }
      ],
      "name": "registerPosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "reserve",
      "outputs": [
        {
          "internalType": "contract IReserve",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_minter",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_applicationPeriod",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_applicationFee",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "_message",
          "type": "string"
        }
      ],
      "name": "suggestMinter",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "symbol",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalSupply",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "recipient",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "transfer",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "recipient",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "transferFrom",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x77723d7382023c3fa96c5b958b822550fd2fb4b14b280790ee24a84645bf3acb",
  "receipt": {
    "to": null,
    "from": "0xaA770D646be470BA8Cb97566DD83662334D5D7CF",
    "contractAddress": "0x73aDCc946149c273fB6db938C20CA42270c5C623",
    "transactionIndex": 108,
    "gasUsed": "3546572",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x7c8e9f39754f2322c4274387e8e6b5e0d108543867606c2c50400f9f203e4c2b",
    "transactionHash": "0x77723d7382023c3fa96c5b958b822550fd2fb4b14b280790ee24a84645bf3acb",
    "logs": [],
    "blockNumber": 4418367,
    "cumulativeGasUsed": "27102672",
    "status": 1,
    "byzantium": true
  },
  "args": [
    900
  ],
  "numDeployments": 4,
  "solcInputHash": "2f0824c01baeabc2ddb053bdf03c9a01",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_minApplicationPeriod\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"AlreadyRegistered\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"allowance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientAllowance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientBalance\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FeeTooLow\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotMinter\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PeriodTooShort\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TooLate\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"reportingMinter\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"reserve\",\"type\":\"uint256\"}],\"name\":\"Loss\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"minter\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"applicationPeriod\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"applicationFee\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"message\",\"type\":\"string\"}],\"name\":\"MinterApplied\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"minter\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"message\",\"type\":\"string\"}],\"name\":\"MinterDenied\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"minter\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"reserve\",\"type\":\"uint256\"}],\"name\":\"Profit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"DOMAIN_SEPARATOR\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MIN_APPLICATION_PERIOD\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MIN_FEE\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"burn\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"burnFrom\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"targetTotalBurnAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"reservePPM\",\"type\":\"uint32\"}],\"name\":\"burnFromWithReserve\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_amountExcludingReserve\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"_reservePPM\",\"type\":\"uint32\"}],\"name\":\"burnWithReserve\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"reservePPM\",\"type\":\"uint32\"}],\"name\":\"burnWithoutReserve\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"mintedAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"_reservePPM\",\"type\":\"uint32\"}],\"name\":\"calculateAssignedReserve\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amountExcludingReserve\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"reservePPM\",\"type\":\"uint32\"}],\"name\":\"calculateFreedAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_minter\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"_helpers\",\"type\":\"address[]\"},{\"internalType\":\"string\",\"name\":\"_message\",\"type\":\"string\"}],\"name\":\"denyMinter\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"equity\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_position\",\"type\":\"address\"}],\"name\":\"getPositionParent\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_minter\",\"type\":\"address\"},{\"internalType\":\"string\",\"name\":\"_message\",\"type\":\"string\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_minter\",\"type\":\"address\"}],\"name\":\"isMinter\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_target\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"mint\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_target\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"_reservePPM\",\"type\":\"uint32\"},{\"internalType\":\"uint32\",\"name\":\"_feesPPM\",\"type\":\"uint32\"}],\"name\":\"mintWithReserve\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"minterReserve\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"minter\",\"type\":\"address\"}],\"name\":\"minters\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"validityStart\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"nonces\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"notifyLoss\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"deadline\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"}],\"name\":\"permit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"position\",\"type\":\"address\"}],\"name\":\"positions\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"registeringMinter\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_position\",\"type\":\"address\"}],\"name\":\"registerPosition\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"reserve\",\"outputs\":[{\"internalType\":\"contract IReserve\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_minter\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_applicationPeriod\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_applicationFee\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"_message\",\"type\":\"string\"}],\"name\":\"suggestMinter\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"events\":{\"Approval(address,address,uint256)\":{\"details\":\"Emitted when the allowance of a `spender` for an `owner` is set by a call to `approve`. `value` is the new allowance.\"},\"Transfer(address,address,uint256)\":{\"details\":\"Emitted when `value` tokens are moved from one account (`from`) to another (`to`). Note that `value` may be zero.\"}},\"kind\":\"dev\",\"methods\":{\"allowance(address,address)\":{\"details\":\"See `IERC20.allowance`.\"},\"approve(address,uint256)\":{\"details\":\"See `IERC20.approve`. Requirements: - `spender` cannot be the zero address.\"},\"balanceOf(address)\":{\"details\":\"See `IERC20.balanceOf`.\"},\"denyMinter(address,address[],string)\":{\"details\":\"Calling this function is relatively cheap thanks to the deletion of a storage slot.\"},\"equity()\":{\"details\":\"Note that the equity contract technically holds both the minter reserve as well as the equity, so the minter reserve must be subtracted. All fees and other kind of income is added to the Equity contract and essentially constitutes profits attributable to the pool share holders.\"},\"minterReserve()\":{\"details\":\"The minter reserve can be used to cover losses after the equity holders have been wiped out.\"},\"registerPosition(address)\":{\"details\":\"It is assumed that the responsible minter that registers the position ensures that the position can be trusted.\"},\"suggestMinter(address,uint256,uint256,string)\":{\"details\":\"The caller has to pay an application fee that is irrevocably lost even if the new minter is vetoed. The caller must assume that someone will veto the new minter unless there is broad consensus that the new minter adds value to the Frankencoin system. Complex proposals should have application periods and applications fees above the minimum. It is assumed that over time, informal ways to coordinate on new minters emerge. The message parameter might be useful for initiating further communication. Maybe it contains a link to a website describing the proposed minter.\",\"params\":{\"_applicationFee\":\"The fee paid by the caller, at least MIN_FEE\",\"_applicationPeriod\":\"The time others have to veto the suggestion, at least MIN_APPLICATION_PERIOD\",\"_message\":\"An optional human readable message to everyone watching this contract\",\"_minter\":\"An address that is given the permission to mint Frankencoins\"}},\"totalSupply()\":{\"details\":\"See `IERC20.totalSupply`.\"},\"transfer(address,uint256)\":{\"details\":\"See `IERC20.transfer`. Requirements: - `recipient` cannot be the zero address. - the caller must have a balance of at least `amount`.\"},\"transferFrom(address,address,uint256)\":{\"details\":\"See `IERC20.transferFrom`. Emits an `Approval` event indicating the updated allowance. This is not required by the EIP. See the note at the beginning of `ERC20`; Requirements: - `sender` and `recipient` cannot be the zero address. - `sender` must have a balance of at least `value`. - the caller must have allowance for `sender`'s tokens of at least `amount`.\"}},\"title\":\"FrankenCoin\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"MIN_FEE()\":{\"notice\":\"Minimal fee and application period when suggesting a new minter.\"},\"burn(uint256)\":{\"notice\":\"Anyone is allowed to burn their ZCHF.\"},\"burnFrom(address,uint256)\":{\"notice\":\"Burn someone elses ZCHF.\"},\"burnFromWithReserve(address,uint256,uint32)\":{\"notice\":\"Burns the target amount taking the tokens to be burned from the payer and the payer's reserve. Only use this method for tokens also minted by the caller with the same _reservePPM. Example: the calling contract has previously minted 100 ZCHF with a reserve ratio of 20% (i.e. 200000 ppm). To burn half of that again, the minter calls burnFrom with a target amount of 50 ZCHF. Assuming that reserves are only 90% covered, this call will deduct 41 ZCHF from the payer's balance and 9 from the reserve, while reducing the minter reserve by 10.\"},\"burnWithReserve(uint256,uint32)\":{\"notice\":\"Burns the provided number of tokens plus whatever reserves are associated with that amount given the reserve requirement. The caller is only allowed to use this method for tokens also minted through the caller with the same _reservePPM amount. Example: the calling contract has previously minted 100 ZCHF with a reserve ratio of 20% (i.e. 200000 ppm). Now they have 41 ZCHF that they do not need so they decide to repay that amount. Assuming the reserves are only 90% covered, the call to burnWithReserve will burn the 41 plus 9 from the reserve, reducing the outstanding 'debt' of the caller by 50 ZCHF in total. This total is returned by the method so the caller knows how much less they owe.\"},\"burnWithoutReserve(uint256,uint32)\":{\"notice\":\"Burn that amount without reclaiming the reserve, but freeing it up and thereby essentially donating it to the pool share holders. This can make sense in combination with 'notifyLoss', i.e. when it is the pool share holders that bear the risk and depending on the outcome they make a profit or a loss. Design rule: Minters calling this method are only allowed to so for tokens amounts they previously minted with the same _reservePPM amount. For example, if someone minted 50 ZCHF earlier with a 20% reserve requirement (200000 ppm), they got 40 ZCHF and paid 10 ZCHF into the reserve. Now they want to repay the debt by burning 50 ZCHF. When doing so using this method, 50 ZCHF get burned and on top of that, 10 ZCHF previously assigned to the minter's reserved are reassigned to the pool share holders.\"},\"calculateAssignedReserve(uint256,uint32)\":{\"notice\":\"Calculates the reserve attributable to someone who minted the given amount with the given reserve requirement. Under normal circumstances, this is just the reserver requirement multiplied by the amount. However, after a severe loss of capital that burned into the minter's reserve, this can also be less than that.\"},\"calculateFreedAmount(uint256,uint32)\":{\"notice\":\"Calculate the amount that is freed when returning amountExcludingReserve given a reserve ratio of reservePPM, taking into account potential losses. Example values in the comments.\"},\"constructor\":{\"notice\":\"Initiates the Frankencoin with the provided minimum application period for new plugins in seconds, for example 10 days, i.e. 3600*24*10 = 864000\"},\"denyMinter(address,address[],string)\":{\"notice\":\"Qualified pool share holders can deny minters during the application period.\"},\"equity()\":{\"notice\":\"The amount of equity of the Frankencoin system in ZCHF, owned by the holders of Frankencoin Pool Shares.\"},\"getPositionParent(address)\":{\"notice\":\"Returns the address of the minter that created this position or null if the provided address is unknown.\"},\"isMinter(address)\":{\"notice\":\"Returns true if the address is an approved minter.\"},\"mintWithReserve(address,uint256,uint32,uint32)\":{\"notice\":\"Mints the provided amount of ZCHF to the target address, automatically forwarding the minting fee and the reserve to the right place.\"},\"minterReserve()\":{\"notice\":\"The reserve provided by the owners of collateralized positions.\"},\"minters(address)\":{\"notice\":\"Map of minters to approval time stamps. If the time stamp is in the past, the minter contract is allowed to mint Frankencoins.\"},\"notifyLoss(uint256)\":{\"notice\":\"Notify the Frankencoin that a minter lost economic access to some coins. This does not mean that the coins are literally lost. It just means that some ZCHF will likely never be repaid and that in order to bring the system back into balance, the lost amount of ZCHF must be removed from the reserve instead. For example, if a minter printed 1 million ZCHF for a mortgage and the mortgage turned out to be unsound with the house only yielding 800'000 in the subsequent auction, there is a loss of 200'000 that needs to be covered by the reserve.\"},\"positions(address)\":{\"notice\":\"List of positions that are allowed to mint and the minter that registered them.\"},\"registerPosition(address)\":{\"notice\":\"Allows minters to register collateralized debt positions, thereby giving them the ability to mint Frankencoins.\"},\"reserve()\":{\"notice\":\"The contract that holds the reserve.\"},\"suggestMinter(address,uint256,uint256,string)\":{\"notice\":\"Publicly accessible method to suggest a new way of minting Frankencoin.\"}},\"notice\":\"The Frankencoin (ZCHF) is an ERC-20 token that is designed to track the value of the Swiss franc. It is not upgradable, but open to arbitrary minting plugins. These are automatically accepted if none of the qualified pool share holders casts a veto, leading to a flexible but conservative governance.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Frankencoin.sol\":\"Frankencoin\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/Equity.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./Frankencoin.sol\\\";\\nimport \\\"./utils/MathUtil.sol\\\";\\nimport \\\"./interface/IReserve.sol\\\";\\nimport \\\"./interface/IERC677Receiver.sol\\\";\\n\\n/**\\n * @title Equity\\n * @notice If the Frankencoin system was a bank, this contract would represent the equity on its balance sheet.\\n * Like with a corporation, the owners of the equity capital are the shareholders, or in this case the holders\\n * of Frankencoin Pool Shares (FPS) tokens. Anyone can mint additional FPS tokens by adding Frankencoins to the\\n * reserve pool. Also, FPS tokens can be redeemed for Frankencoins again after a minimum holding period.\\n * Furthermore, the FPS shares come with some voting power. Anyone that held at least 3% of the holding-period-\\n * weighted reserve pool shares gains veto power and can veto new proposals.\\n */\\ncontract Equity is ERC20PermitLight, MathUtil, IReserve {\\n    /**\\n     * The VALUATION_FACTOR determines the market cap of the reserve pool shares relative to the equity reserves.\\n     * The following always holds: Market Cap = Valuation Factor * Equity Reserve = Price * Supply\\n     *\\n     * In the absence of profits and losses, the variables grow as follows when FPS tokens are minted:\\n     *\\n     * |   Reserve     |   Market Cap  |     Price     |     Supply   |\\n     * |          1000 |          3000 |             3 |         1000 |\\n     * |       1000000 |       3000000 |           300 |        10000 |\\n     * |    1000000000 |    3000000000 |         30000 |       100000 |\\n     * | 1000000000000 | 3000000000000 |       3000000 |      1000000 |\\n     *\\n     * I.e., the supply is proporational to the cubic root of the reserve and the price is proportional to the\\n     * squared cubic root. When profits accumulate or losses materialize, the reserve, the market cap,\\n     * and the price are adjusted proportionally, with the supply staying constant. In the absence of an extreme\\n     * inflation of the Swiss franc, it is unlikely that there will ever be more than ten million FPS.\\n     */\\n    uint32 public constant VALUATION_FACTOR = 3;\\n\\n    uint256 private constant MINIMUM_EQUITY = 1000 * ONE_DEC18;\\n\\n    /**\\n     * @notice The quorum in basis points. 100 is 1%.\\n     */\\n    uint32 private constant QUORUM = 200;\\n\\n    /**\\n     * @notice The number of digits to store the average holding time of share tokens.\\n     */\\n    uint8 private constant TIME_RESOLUTION_BITS = 20;\\n\\n    /**\\n     * @notice The minimum holding duration. You are not allowed to redeem your pool shares if you held them\\n     * for less than the minimum holding duration at average. For example, if you have two pool shares on your\\n     * address, one acquired 5 days ago and one acquired 105 days ago, you cannot redeem them as the average\\n     * holding duration of your shares is only 55 days < 90 days.\\n     */\\n    uint256 public constant MIN_HOLDING_DURATION = 90 days << TIME_RESOLUTION_BITS; // Set to 5 for local testing\\n\\n    Frankencoin public immutable zchf;\\n\\n    /**\\n     * @dev To track the total number of votes we need to know the number of votes at the anchor time and when the\\n     * anchor time was. This is (hopefully) stored in one 256 bit slot, with the anchor time taking 64 Bits and\\n     * the total vote count 192 Bits. Given the sub-second resolution of 20 Bits, the implicit assumption is\\n     * that the timestamp can always be stored in 44 Bits (i.e. it does not exceed half a million years). Further,\\n     * given 18 decimals (about 60 Bits), this implies that the total supply cannot exceed\\n     *   192 - 60 - 44 - 20 = 68 Bits\\n     * Here, we are also save, as 68 Bits would imply more than a trillion outstanding shares. In fact,\\n     * a limit of about 2**36 shares (that's about 2**96 Bits when taking into account the decimals) is imposed\\n     * when minting. This means that the maximum supply is billions shares, which is could only be reached in\\n     * a scenario with hyper inflation, in which case the stablecoin is worthless anyway.\\n     */\\n    uint192 private totalVotesAtAnchor; // Total number of votes at the anchor time, see comment on the um\\n    uint64 private totalVotesAnchorTime; // 44 Bit for the time stamp, 20 Bit sub-second time resolution\\n\\n    /**\\n     * @notice Keeping track on who delegated votes to whom.\\n     * Note that delegation does not mean you cannot vote / veto any more, it just means that the delegate can\\n     * benefit from your votes when invoking a veto. Circular delegations are valid, do not help when voting.\\n     */\\n    mapping(address owner => address delegate) public delegates;\\n\\n    /**\\n     * @notice A time stamp in the past such that: votes = balance * (time passed since anchor was set)\\n     */\\n    mapping(address owner => uint64 timestamp) private voteAnchor; // 44 bits for time stamp, 20 subsecond resolution\\n\\n    event Delegation(address indexed from, address indexed to); // indicates a delegation\\n    event Trade(address who, int amount, uint totPrice, uint newprice); // amount pos or neg for mint or redemption\\n\\n    constructor(Frankencoin zchf_) ERC20(18) {\\n        zchf = zchf_;\\n    }\\n\\n    function name() external pure override returns (string memory) {\\n        return \\\"Frankencoin Pool Share\\\";\\n    }\\n\\n    function symbol() external pure override returns (string memory) {\\n        return \\\"FPS\\\";\\n    }\\n\\n    /**\\n     * @notice Returns the price of one FPS in ZCHF with 18 decimals precision.\\n     */\\n    function price() public view returns (uint256) {\\n        uint256 equity = zchf.equity();\\n        if (equity == 0 || totalSupply() == 0) {\\n            return ONE_DEC18; // initial price is 1000 ZCHF for the first 1000 FPS\\n        } else {\\n            return (VALUATION_FACTOR * zchf.equity() * ONE_DEC18) / totalSupply();\\n        }\\n    }\\n\\n    function _beforeTokenTransfer(address from, address to, uint256 amount) internal override {\\n        super._beforeTokenTransfer(from, to, amount);\\n        if (amount > 0) {\\n            // No need to adjust the sender votes. When they send out 10% of their shares, they also lose 10% of\\n            // their votes so everything falls nicely into place. Recipient votes should stay the same, but grow\\n            // faster in the future, requiring an adjustment of the anchor.\\n            uint256 roundingLoss = _adjustRecipientVoteAnchor(to, amount);\\n            // The total also must be adjusted and kept accurate by taking into account the rounding error.\\n            _adjustTotalVotes(from, amount, roundingLoss);\\n        }\\n    }\\n\\n    /**\\n     * @notice Returns whether the given address is allowed to redeem FPS, which is the\\n     * case after their average holding duration is larger than the required minimum.\\n     */\\n    function canRedeem(address owner) public view returns (bool) {\\n        return _anchorTime() - voteAnchor[owner] >= MIN_HOLDING_DURATION;\\n    }\\n\\n    /**\\n     * @notice Decrease the total votes anchor when tokens lose their voting power due to being moved\\n     * @param from      sender\\n     * @param amount    amount to be sent\\n     */\\n    function _adjustTotalVotes(address from, uint256 amount, uint256 roundingLoss) internal {\\n        uint64 time = _anchorTime();\\n        uint256 lostVotes = from == address(0x0) ? 0 : (time - voteAnchor[from]) * amount;\\n        totalVotesAtAnchor = uint192(totalVotes() - roundingLoss - lostVotes);\\n        totalVotesAnchorTime = time;\\n    }\\n\\n    /**\\n     * @notice the vote anchor of the recipient is moved forward such that the number of calculated\\n     * votes does not change despite the higher balance.\\n     * @param to        receiver address\\n     * @param amount    amount to be received\\n     * @return the number of votes lost due to rounding errors\\n     */\\n    function _adjustRecipientVoteAnchor(address to, uint256 amount) internal returns (uint256) {\\n        if (to != address(0x0)) {\\n            uint256 recipientVotes = votes(to); // for example 21 if 7 shares were held for 3 seconds\\n            uint256 newbalance = balanceOf(to) + amount; // for example 11 if 4 shares are added\\n            // new example anchor is only 21 / 11 = 1 second in the past\\n            voteAnchor[to] = uint64(_anchorTime() - recipientVotes / newbalance);\\n            return recipientVotes % newbalance; // we have lost 21 % 11 = 10 votes\\n        } else {\\n            // optimization for burn, vote anchor of null address does not matter\\n            return 0;\\n        }\\n    }\\n\\n    /**\\n     * @notice Time stamp with some additional bits for higher resolution.\\n     */\\n    function _anchorTime() internal view returns (uint64) {\\n        return uint64(block.timestamp << TIME_RESOLUTION_BITS);\\n    }\\n\\n    /**\\n     * @notice The relative voting power of the address.\\n     * @return A percentage with 1e18 being 100%\\n     */\\n    function relativeVotes(address holder) external view returns (uint256) {\\n        return (ONE_DEC18 * votes(holder)) / totalVotes();\\n    }\\n\\n    /**\\n     * @notice The votes of the holder, excluding votes from delegates.\\n     */\\n    function votes(address holder) public view returns (uint256) {\\n        return balanceOf(holder) * (_anchorTime() - voteAnchor[holder]);\\n    }\\n\\n    /**\\n     * @notice Total number of votes in the system.\\n     */\\n    function totalVotes() public view returns (uint256) {\\n        return totalVotesAtAnchor + totalSupply() * (_anchorTime() - totalVotesAnchorTime);\\n    }\\n\\n    /**\\n     * @notice The number of votes the sender commands when taking the support of the helpers into account.\\n     * @param sender    The address whose total voting power is of interest\\n     * @param helpers   An incrementally sorted list of helpers without duplicates and without the sender.\\n     *                  The call fails if the list contains an address that does not delegate to sender.\\n     *                  For indirect delegates, i.e. a -> b -> c, both a and b must be included for both to count.\\n     * @return          The total number of votes of sender at the current point in time.\\n     */\\n    function votesDelegated(address sender, address[] calldata helpers) public view returns (uint256) {\\n        uint256 _votes = votes(sender);\\n        require(_checkDuplicatesAndSorted(helpers));\\n        for (uint i = 0; i < helpers.length; i++) {\\n            address current = helpers[i];\\n            require(current != sender);\\n            require(_canVoteFor(sender, current));\\n            _votes += votes(current);\\n        }\\n        return _votes;\\n    }\\n\\n    function _checkDuplicatesAndSorted(address[] calldata helpers) internal pure returns (bool ok) {\\n        if (helpers.length <= 1) {\\n            return true;\\n        } else {\\n            address prevAddress = helpers[0];\\n            for (uint i = 1; i < helpers.length; i++) {\\n                if (helpers[i] <= prevAddress) {\\n                    return false;\\n                }\\n                prevAddress = helpers[i];\\n            }\\n            return true;\\n        }\\n    }\\n\\n    /**\\n     * @notice Checks whether the sender address is qualified given a list of helpers that delegated their votes\\n     * directly or indirectly to the sender. It is the responsiblity of the caller to figure out whether\\n     * helpes are necessary and to identify them by scanning the blockchain for Delegation events.\\n     */\\n    function checkQualified(address sender, address[] calldata helpers) public view override {\\n        uint256 _votes = votesDelegated(sender, helpers);\\n        if (_votes * 10000 < QUORUM * totalVotes()) revert NotQualified();\\n    }\\n\\n    error NotQualified();\\n\\n    /**\\n     * @notice Increases the voting power of the delegate by your number of votes without taking away any voting power\\n     * from the sender.\\n     */\\n    function delegateVoteTo(address delegate) external {\\n        delegates[msg.sender] = delegate;\\n        emit Delegation(msg.sender, delegate);\\n    }\\n\\n    function _canVoteFor(address delegate, address owner) internal view returns (bool) {\\n        if (owner == delegate) {\\n            return true;\\n        } else if (owner == address(0x0)) {\\n            return false;\\n        } else {\\n            return _canVoteFor(delegate, delegates[owner]);\\n        }\\n    }\\n\\n    /**\\n     * @notice Since quorum is rather low, it is important to have a way to prevent malicious minority holders\\n     * from blocking the whole system. This method provides a way for the good guys to team up and destroy\\n     * the bad guy's votes (at the cost of also reducing their own votes). This mechanism potentially\\n     * gives full control over the system to whoever has 51% of the votes.\\n     *\\n     * Since this is a rather aggressive measure, delegation is not supported. Every holder must call this\\n     * method on their own.\\n     * @param targets   The target addresses to remove votes from\\n     * @param votesToDestroy    The maximum number of votes the caller is willing to sacrifice\\n     */\\n    function kamikaze(address[] calldata targets, uint256 votesToDestroy) external {\\n        uint256 budget = _reduceVotes(msg.sender, votesToDestroy);\\n        uint256 destroyedVotes = 0;\\n        for (uint256 i = 0; i < targets.length && destroyedVotes < budget; i++) {\\n            destroyedVotes += _reduceVotes(targets[i], budget - destroyedVotes);\\n        }\\n        require(destroyedVotes > 0); // sanity check\\n        totalVotesAtAnchor = uint192(totalVotes() - destroyedVotes - budget);\\n        totalVotesAnchorTime = _anchorTime();\\n    }\\n\\n    function _reduceVotes(address target, uint256 amount) internal returns (uint256) {\\n        uint256 votesBefore = votes(target);\\n        if (amount >= votesBefore) {\\n            amount = votesBefore;\\n            voteAnchor[target] = _anchorTime();\\n            return votesBefore;\\n        } else {\\n            voteAnchor[target] = uint64(_anchorTime() - (votesBefore - amount) / balanceOf(target));\\n            return votesBefore - votes(target);\\n        }\\n    }\\n\\n    /**\\n     * @notice Call this method to obtain newly minted pool shares in exchange for Frankencoins.\\n     * No allowance required (i.e. it is hardcoded in the Frankencoin token contract).\\n     * Make sure to invest at least 10e-12 * market cap to avoid rounding losses.\\n     *\\n     * @dev If equity is close to zero or negative, you need to send enough ZCHF to bring equity back to 1000 ZCHF.\\n     *\\n     * @param amount            Frankencoins to invest\\n     * @param expectedShares    Minimum amount of expected shares for frontrunning protection\\n     */\\n    function invest(uint256 amount, uint256 expectedShares) external returns (uint256) {\\n        zchf.transferFrom(msg.sender, address(this), amount);\\n        uint256 equity = zchf.equity();\\n        require(equity >= MINIMUM_EQUITY, \\\"insuf equity\\\"); // ensures that the initial deposit is at least 1000 ZCHF\\n\\n        uint256 shares = _calculateShares(equity <= amount ? 0 : equity - amount, amount);\\n        require(shares >= expectedShares);\\n        _mint(msg.sender, shares);\\n        emit Trade(msg.sender, int(shares), amount, price());\\n\\n        // limit the total supply to a reasonable amount to guard against overflows with price and vote calculations\\n        // the 36 bits are 68 bits for magnitude and 60 bits for precision, as calculated in an above comment\\n        require(totalSupply() <= type(uint96).max, \\\"total supply exceeded\\\");\\n        return shares;\\n    }\\n\\n    /**\\n     * @notice Calculate shares received when investing Frankencoins\\n     * @param investment    ZCHF to be invested\\n     * @return shares to be received in return\\n     */\\n    function calculateShares(uint256 investment) external view returns (uint256) {\\n        return _calculateShares(zchf.equity(), investment);\\n    }\\n\\n    function _calculateShares(uint256 capitalBefore, uint256 investment) internal view returns (uint256) {\\n        uint256 totalShares = totalSupply();\\n        uint256 investmentExFees = (investment * 997) / 1000; // remove 0.3% fee\\n        // Assign 1000 FPS for the initial deposit, calculate the amount otherwise\\n        uint256 newTotalShares = capitalBefore < MINIMUM_EQUITY || totalShares == 0\\n            ? totalShares + 1000 * ONE_DEC18\\n            : _mulD18(totalShares, _cubicRoot(_divD18(capitalBefore + investmentExFees, capitalBefore)));\\n        return newTotalShares - totalShares;\\n    }\\n\\n    /**\\n     * @notice Redeem the given amount of shares owned by the sender and transfer the proceeds to the target.\\n     * @return The amount of ZCHF transferred to the target\\n     */\\n    function redeem(address target, uint256 shares) external returns (uint256) {\\n        return _redeemFrom(msg.sender, target, shares);\\n    }\\n\\n    /**\\n     * @notice Like redeem(...), but with an extra parameter to protect against frontrunning.\\n     * @param expectedProceeds  The minimum acceptable redemption proceeds.\\n     */\\n    function redeemExpected(address target, uint256 shares, uint256 expectedProceeds) external returns (uint256) {\\n        uint256 proceeds = _redeemFrom(msg.sender, target, shares);\\n        require(proceeds >= expectedProceeds);\\n        return proceeds;\\n    }\\n\\n    /**\\n     * @notice Redeem FPS based on an allowance from the owner to the caller.\\n     * See also redeemExpected(...).\\n     */\\n    function redeemFrom(\\n        address owner,\\n        address target,\\n        uint256 shares,\\n        uint256 expectedProceeds\\n    ) external returns (uint256) {\\n        _useAllowance(owner, msg.sender, shares);\\n        uint256 proceeds = _redeemFrom(owner, target, shares);\\n        require(proceeds >= expectedProceeds);\\n        return proceeds;\\n    }\\n\\n    function _redeemFrom(address owner, address target, uint256 shares) internal returns (uint256) {\\n        require(canRedeem(owner));\\n        uint256 proceeds = calculateProceeds(shares);\\n        _burn(owner, shares);\\n        zchf.transfer(target, proceeds);\\n        emit Trade(owner, -int(shares), proceeds, price());\\n        return proceeds;\\n    }\\n\\n    /**\\n     * @notice Calculate ZCHF received when depositing shares\\n     * @param shares number of shares we want to exchange for ZCHF,\\n     *               in dec18 format\\n     * @return amount of ZCHF received for the shares\\n     */\\n    function calculateProceeds(uint256 shares) public view returns (uint256) {\\n        uint256 totalShares = totalSupply();\\n        require(shares + ONE_DEC18 < totalShares, \\\"too many shares\\\"); // make sure there is always at least one share\\n        uint256 capital = zchf.equity();\\n        uint256 reductionAfterFees = (shares * 997) / 1000;\\n        uint256 newCapital = _mulD18(capital, _power3(_divD18(totalShares - reductionAfterFees, totalShares)));\\n        return capital - newCapital;\\n    }\\n\\n    /**\\n     * @notice If there is less than 1000 ZCHF in equity left (maybe even negative), the system is at risk\\n     * and we should allow qualified FPS holders to restructure the system.\\n     *\\n     * Example: there was a devastating loss and equity stands at -1'000'000. Most shareholders have lost hope in the\\n     * Frankencoin system except for a group of small FPS holders who still believes in it and is willing to provide\\n     * 2'000'000 ZCHF to save it. These brave souls are essentially donating 1'000'000 to the minter reserve and it\\n     * would be wrong to force them to share the other million with the passive FPS holders. Instead, they will get\\n     * the possibility to bootstrap the system again owning 100% of all FPS shares.\\n     *\\n     * @param helpers          A list of addresses that delegate to the caller in incremental order\\n     * @param addressesToWipe  A list of addresses whose FPS will be burned to zero\\n     */\\n    function restructureCapTable(address[] calldata helpers, address[] calldata addressesToWipe) external {\\n        require(zchf.equity() < MINIMUM_EQUITY);\\n        checkQualified(msg.sender, helpers);\\n        for (uint256 i = 0; i < addressesToWipe.length; i++) {\\n            address current = addressesToWipe[i];\\n            _burn(current, balanceOf(current));\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x98804a5a6f8056bf53087a7d7e3c1e00181a74bed9096ac90725724209177fe3\",\"license\":\"MIT\"},\"contracts/Frankencoin.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\nimport \\\"./utils/ERC20PermitLight.sol\\\";\\nimport \\\"./Equity.sol\\\";\\nimport \\\"./interface/IReserve.sol\\\";\\nimport \\\"./interface/IFrankencoin.sol\\\";\\n\\n/**\\n * @title FrankenCoin\\n * @notice The Frankencoin (ZCHF) is an ERC-20 token that is designed to track the value of the Swiss franc.\\n * It is not upgradable, but open to arbitrary minting plugins. These are automatically accepted if none of the\\n * qualified pool share holders casts a veto, leading to a flexible but conservative governance.\\n */\\ncontract Frankencoin is ERC20PermitLight, IFrankencoin {\\n    /**\\n     * @notice Minimal fee and application period when suggesting a new minter.\\n     */\\n    uint256 public constant MIN_FEE = 1000 * (10 ** 18);\\n    uint256 public immutable MIN_APPLICATION_PERIOD; // for example 10 days\\n\\n    /**\\n     * @notice The contract that holds the reserve.\\n     */\\n    IReserve public immutable override reserve;\\n\\n    /**\\n     * @notice How much of the reserve belongs to the minters. Everything else belongs to the pool share holders.\\n     * Stored with 6 additional digits of accuracy so no rounding is necessary when dealing with parts per\\n     * million (ppm) in reserve calculations.\\n     */\\n    uint256 private minterReserveE6;\\n\\n    /**\\n     * @notice Map of minters to approval time stamps. If the time stamp is in the past, the minter contract is allowed\\n     * to mint Frankencoins.\\n     */\\n    mapping(address minter => uint256 validityStart) public minters;\\n\\n    /**\\n     * @notice List of positions that are allowed to mint and the minter that registered them.\\n     */\\n    mapping(address position => address registeringMinter) public positions;\\n\\n    event MinterApplied(address indexed minter, uint256 applicationPeriod, uint256 applicationFee, string message);\\n    event MinterDenied(address indexed minter, string message);\\n    event Loss(address indexed reportingMinter, uint256 amount, uint256 reserve);\\n    event Profit(address indexed minter, uint256 amount, uint256 reserve);\\n\\n    error PeriodTooShort();\\n    error FeeTooLow();\\n    error AlreadyRegistered();\\n    error NotMinter();\\n    error TooLate();\\n\\n    modifier minterOnly() {\\n        if (!isMinter(msg.sender) && !isMinter(positions[msg.sender])) revert NotMinter();\\n        _;\\n    }\\n\\n    /**\\n     * @notice Initiates the Frankencoin with the provided minimum application period for new plugins\\n     * in seconds, for example 10 days, i.e. 3600*24*10 = 864000\\n     */\\n    constructor(uint256 _minApplicationPeriod) ERC20(18) {\\n        MIN_APPLICATION_PERIOD = _minApplicationPeriod;\\n        reserve = new Equity(this);\\n    }\\n\\n    function name() external pure override returns (string memory) {\\n        return \\\"Frankencoin\\\";\\n    }\\n\\n    function symbol() external pure override returns (string memory) {\\n        return \\\"ZCHF\\\";\\n    }\\n\\n    function initialize(address _minter, string calldata _message) external {\\n        require(totalSupply() == 0 && reserve.totalSupply() == 0);\\n        minters[_minter] = block.timestamp;\\n        emit MinterApplied(_minter, 0, 0, _message);\\n    }\\n\\n    /**\\n     * @notice Publicly accessible method to suggest a new way of minting Frankencoin.\\n     * @dev The caller has to pay an application fee that is irrevocably lost even if the new minter is vetoed.\\n     * The caller must assume that someone will veto the new minter unless there is broad consensus that the new minter\\n     * adds value to the Frankencoin system. Complex proposals should have application periods and applications fees\\n     * above the minimum. It is assumed that over time, informal ways to coordinate on new minters emerge. The message\\n     * parameter might be useful for initiating further communication. Maybe it contains a link to a website describing\\n     * the proposed minter.\\n     *\\n     * @param _minter              An address that is given the permission to mint Frankencoins\\n     * @param _applicationPeriod   The time others have to veto the suggestion, at least MIN_APPLICATION_PERIOD\\n     * @param _applicationFee      The fee paid by the caller, at least MIN_FEE\\n     * @param _message             An optional human readable message to everyone watching this contract\\n     */\\n    function suggestMinter(\\n        address _minter,\\n        uint256 _applicationPeriod,\\n        uint256 _applicationFee,\\n        string calldata _message\\n    ) external override {\\n        if (_applicationPeriod < MIN_APPLICATION_PERIOD) revert PeriodTooShort();\\n        if (_applicationFee < MIN_FEE) revert FeeTooLow();\\n        if (minters[_minter] != 0) revert AlreadyRegistered();\\n        _transfer(msg.sender, address(reserve), _applicationFee);\\n        minters[_minter] = block.timestamp + _applicationPeriod;\\n        emit MinterApplied(_minter, _applicationPeriod, _applicationFee, _message);\\n    }\\n\\n    /**\\n     * @notice Make the system more user friendly by skipping the allowance in many cases.\\n     * @dev We trust minters and the positions they have created to mint and burn as they please, so\\n     * giving them arbitrary allowances does not pose an additional risk.\\n     */\\n    function _allowance(address owner, address spender) internal view override returns (uint256) {\\n        uint256 explicit = super._allowance(owner, spender);\\n        if (explicit > 0) {\\n            return explicit; // don't waste gas checking minter\\n        } else if (isMinter(spender) || isMinter(getPositionParent(spender)) || spender == address(reserve)) {\\n            return INFINITY;\\n        } else {\\n            return 0;\\n        }\\n    }\\n\\n    /**\\n     * @notice The reserve provided by the owners of collateralized positions.\\n     * @dev The minter reserve can be used to cover losses after the equity holders have been wiped out.\\n     */\\n    function minterReserve() public view returns (uint256) {\\n        return minterReserveE6 / 1000000;\\n    }\\n\\n    /**\\n     * @notice Allows minters to register collateralized debt positions, thereby giving them the ability to mint Frankencoins.\\n     * @dev It is assumed that the responsible minter that registers the position ensures that the position can be trusted.\\n     */\\n    function registerPosition(address _position) external override {\\n        if (!isMinter(msg.sender)) revert NotMinter();\\n        positions[_position] = msg.sender;\\n    }\\n\\n    /**\\n     * @notice The amount of equity of the Frankencoin system in ZCHF, owned by the holders of Frankencoin Pool Shares.\\n     * @dev Note that the equity contract technically holds both the minter reserve as well as the equity, so the minter\\n     * reserve must be subtracted. All fees and other kind of income is added to the Equity contract and essentially\\n     * constitutes profits attributable to the pool share holders.\\n     */\\n    function equity() public view returns (uint256) {\\n        uint256 balance = balanceOf(address(reserve));\\n        uint256 minReserve = minterReserve();\\n        if (balance <= minReserve) {\\n            return 0;\\n        } else {\\n            return balance - minReserve;\\n        }\\n    }\\n\\n    /**\\n     * @notice Qualified pool share holders can deny minters during the application period.\\n     * @dev Calling this function is relatively cheap thanks to the deletion of a storage slot.\\n     */\\n    function denyMinter(address _minter, address[] calldata _helpers, string calldata _message) external override {\\n        if (block.timestamp > minters[_minter]) revert TooLate();\\n        reserve.checkQualified(msg.sender, _helpers);\\n        delete minters[_minter];\\n        emit MinterDenied(_minter, _message);\\n    }\\n\\n    /**\\n     * @notice Mints the provided amount of ZCHF to the target address, automatically forwarding\\n     * the minting fee and the reserve to the right place.\\n     */\\n    function mintWithReserve(\\n        address _target,\\n        uint256 _amount,\\n        uint32 _reservePPM,\\n        uint32 _feesPPM\\n    ) external override minterOnly {\\n        uint256 usableMint = (_amount * (1000_000 - _feesPPM - _reservePPM)) / 1000_000; // rounding down is fine\\n        _mint(_target, usableMint);\\n        _mint(address(reserve), _amount - usableMint); // rest goes to equity as reserves or as fees\\n        minterReserveE6 += _amount * _reservePPM;\\n    }\\n\\n    function mint(address _target, uint256 _amount) external override minterOnly {\\n        _mint(_target, _amount);\\n    }\\n\\n    /**\\n     * Anyone is allowed to burn their ZCHF.\\n     */\\n    function burn(uint256 _amount) external {\\n        _burn(msg.sender, _amount);\\n    }\\n\\n    /**\\n     * @notice Burn someone elses ZCHF.\\n     */\\n    function burnFrom(address _owner, uint256 _amount) external override minterOnly {\\n        _burn(_owner, _amount);\\n    }\\n\\n    /**\\n     * @notice Burn that amount without reclaiming the reserve, but freeing it up and thereby essentially donating it to the\\n     * pool share holders. This can make sense in combination with 'notifyLoss', i.e. when it is the pool share\\n     * holders that bear the risk and depending on the outcome they make a profit or a loss.\\n     *\\n     * Design rule: Minters calling this method are only allowed to so for tokens amounts they previously minted with\\n     * the same _reservePPM amount.\\n     *\\n     * For example, if someone minted 50 ZCHF earlier with a 20% reserve requirement (200000 ppm), they got 40 ZCHF\\n     * and paid 10 ZCHF into the reserve. Now they want to repay the debt by burning 50 ZCHF. When doing so using this\\n     * method, 50 ZCHF get burned and on top of that, 10 ZCHF previously assigned to the minter's reserved are\\n     * reassigned to the pool share holders.\\n     */\\n    function burnWithoutReserve(uint256 amount, uint32 reservePPM) public override minterOnly {\\n        _burn(msg.sender, amount);\\n        uint256 reserveReduction = amount * reservePPM;\\n        if (reserveReduction > minterReserveE6) {\\n            emit Profit(msg.sender, minterReserveE6, 0);\\n            minterReserveE6 = 0; // should never happen, but we want robust behavior in case it does\\n        } else {\\n            minterReserveE6 -= reserveReduction;\\n            emit Profit(msg.sender, reserveReduction, minterReserveE6);\\n        }\\n    }\\n\\n    /**\\n     * @notice Burns the provided number of tokens plus whatever reserves are associated with that amount given the reserve\\n     * requirement. The caller is only allowed to use this method for tokens also minted through the caller with the\\n     * same _reservePPM amount.\\n     *\\n     * Example: the calling contract has previously minted 100 ZCHF with a reserve ratio of 20% (i.e. 200000 ppm).\\n     * Now they have 41 ZCHF that they do not need so they decide to repay that amount. Assuming the reserves are\\n     * only 90% covered, the call to burnWithReserve will burn the 41 plus 9 from the reserve, reducing the outstanding\\n     * 'debt' of the caller by 50 ZCHF in total. This total is returned by the method so the caller knows how much less\\n     * they owe.\\n     */\\n    function burnWithReserve(\\n        uint256 _amountExcludingReserve,\\n        uint32 _reservePPM\\n    ) external override minterOnly returns (uint256) {\\n        uint256 freedAmount = calculateFreedAmount(_amountExcludingReserve, _reservePPM); // 50 in the example\\n        minterReserveE6 -= freedAmount * _reservePPM; // reduce reserve requirements by original ratio\\n        _transfer(address(reserve), msg.sender, freedAmount - _amountExcludingReserve); // collect assigned reserve\\n        _burn(msg.sender, freedAmount); // burn the rest of the freed amount\\n        return freedAmount;\\n    }\\n\\n    /**\\n     * @notice Burns the target amount taking the tokens to be burned from the payer and the payer's reserve.\\n     * Only use this method for tokens also minted by the caller with the same _reservePPM.\\n     *\\n     * Example: the calling contract has previously minted 100 ZCHF with a reserve ratio of 20% (i.e. 200000 ppm).\\n     * To burn half of that again, the minter calls burnFrom with a target amount of 50 ZCHF. Assuming that reserves\\n     * are only 90% covered, this call will deduct 41 ZCHF from the payer's balance and 9 from the reserve, while\\n     * reducing the minter reserve by 10.\\n     */\\n    function burnFromWithReserve(\\n        address payer,\\n        uint256 targetTotalBurnAmount,\\n        uint32 reservePPM\\n    ) external override minterOnly returns (uint256) {\\n        uint256 assigned = calculateAssignedReserve(targetTotalBurnAmount, reservePPM);\\n        _transfer(address(reserve), payer, assigned); // send reserve to owner\\n        _burn(payer, targetTotalBurnAmount); // and burn the full amount from the owner's address\\n        minterReserveE6 -= targetTotalBurnAmount * reservePPM; // reduce reserve requirements by original ratio\\n        return assigned;\\n    }\\n\\n    /**\\n     * @notice Calculates the reserve attributable to someone who minted the given amount with the given reserve requirement.\\n     * Under normal circumstances, this is just the reserver requirement multiplied by the amount. However, after a\\n     * severe loss of capital that burned into the minter's reserve, this can also be less than that.\\n     */\\n    function calculateAssignedReserve(uint256 mintedAmount, uint32 _reservePPM) public view returns (uint256) {\\n        uint256 theoreticalReserve = (_reservePPM * mintedAmount) / 1000000;\\n        uint256 currentReserve = balanceOf(address(reserve));\\n        uint256 minterReserve_ = minterReserve();\\n        if (currentReserve < minterReserve_) {\\n            // not enough reserves, owner has to take a loss\\n            return (theoreticalReserve * currentReserve) / minterReserve_;\\n        } else {\\n            return theoreticalReserve;\\n        }\\n    }\\n\\n    /**\\n     * @notice Calculate the amount that is freed when returning amountExcludingReserve given a reserve ratio of reservePPM,\\n     * taking into account potential losses. Example values in the comments.\\n     */\\n    function calculateFreedAmount(\\n        uint256 amountExcludingReserve /* 41 */,\\n        uint32 reservePPM /* 20% */\\n    ) public view returns (uint256) {\\n        uint256 currentReserve = balanceOf(address(reserve)); // 18, 10% below what we should have\\n        uint256 minterReserve_ = minterReserve(); // 20\\n        uint256 adjustedReservePPM = currentReserve < minterReserve_\\n            ? (reservePPM * currentReserve) / minterReserve_\\n            : reservePPM; // 18%\\n        return (1000000 * amountExcludingReserve) / (1000000 - adjustedReservePPM); // 41 / (1-18%) = 50\\n    }\\n\\n    /**\\n     * @notice Notify the Frankencoin that a minter lost economic access to some coins. This does not mean that the coins are\\n     * literally lost. It just means that some ZCHF will likely never be repaid and that in order to bring the system\\n     * back into balance, the lost amount of ZCHF must be removed from the reserve instead.\\n     *\\n     * For example, if a minter printed 1 million ZCHF for a mortgage and the mortgage turned out to be unsound with\\n     * the house only yielding 800'000 in the subsequent auction, there is a loss of 200'000 that needs to be covered\\n     * by the reserve.\\n     */\\n    function notifyLoss(uint256 _amount) external override minterOnly {\\n        uint256 reserveLeft = balanceOf(address(reserve));\\n        if (reserveLeft >= _amount) {\\n            _transfer(address(reserve), msg.sender, _amount);\\n        } else {\\n            _transfer(address(reserve), msg.sender, reserveLeft);\\n            _mint(msg.sender, _amount - reserveLeft);\\n        }\\n        emit Loss(msg.sender, _amount, reserveLeft);\\n    }\\n\\n    /**\\n     * @notice Returns true if the address is an approved minter.\\n     */\\n    function isMinter(address _minter) public view override returns (bool) {\\n        return minters[_minter] != 0 && block.timestamp >= minters[_minter];\\n    }\\n\\n    /**\\n     * @notice Returns the address of the minter that created this position or null if the provided address is unknown.\\n     */\\n    function getPositionParent(address _position) public view override returns (address) {\\n        return positions[_position];\\n    }\\n}\\n\",\"keccak256\":\"0x9d584069bd11562e0c401a81a01fa00b6ac09d084cd7c85f98c781517ce625ab\",\"license\":\"MIT\"},\"contracts/interface/IERC20.sol\":{\"content\":\"/**\\n * SPDX-License-Identifier: MIT\\n *\\n * Copyright (c) 2016-2019 zOS Global Limited\\n *\\n */\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP. Does not include\\n * the optional functions; to access them see `ERC20Detailed`.\\n */\\n\\ninterface IERC20 {\\n    function name() external view returns (string memory);\\n\\n    function symbol() external view returns (string memory);\\n\\n    function decimals() external view returns (uint8);\\n\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `recipient`.\\n     *\\n     * Returns always true. Throws error on failure.\\n     *\\n     * Emits a `Transfer` event.\\n     */\\n    function transfer(address recipient, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through `transferFrom`. This is\\n     * zero by default.\\n     *\\n     * This value can change when `approve` or `transferFrom` are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * > Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an `Approval` event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `sender` to `recipient` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns always true. Throws error on failure.\\n     *\\n     * Emits a `Transfer` event.\\n     */\\n    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to `approve`. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n}\\n\",\"keccak256\":\"0x6c4823424e1d0c53e2d3e978b81929fcec2583b96ed286abc955b71a5aad5544\",\"license\":\"MIT\"},\"contracts/interface/IERC677Receiver.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\ninterface IERC677Receiver {\\n    \\n    function onTokenTransfer(address from, uint256 amount, bytes calldata data) external returns (bool);\\n\\n}\",\"keccak256\":\"0x40703acdfa2126286b117ad0cca84c0a4ca2d3b18586765186c9bdd8ad5cf744\",\"license\":\"MIT\"},\"contracts/interface/IFrankencoin.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IERC20.sol\\\";\\nimport \\\"./IReserve.sol\\\";\\n\\ninterface IFrankencoin is IERC20 {\\n    function suggestMinter(address _minter, uint256 _applicationPeriod, uint256 _applicationFee, string calldata _message) external;\\n\\n    function registerPosition(address position) external;\\n\\n    function denyMinter(address minter, address[] calldata helpers, string calldata message) external;\\n\\n    function reserve() external view returns (IReserve);\\n\\n    function minterReserve() external view returns (uint256);\\n\\n    function calculateAssignedReserve(uint256 mintedAmount, uint32 _reservePPM) external view returns (uint256);\\n\\n    function equity() external view returns (uint256);\\n\\n    function isMinter(address minter) external view returns (bool);\\n\\n    function getPositionParent(address position) external view returns (address);\\n\\n    function mint(address target, uint256 amount) external;\\n\\n    function mintWithReserve(address target, uint256 amount, uint32 reservePPM, uint32 feePPM) external;\\n\\n    function burnFrom(address target, uint256 amount) external;\\n\\n    function burnWithoutReserve(uint256 amountIncludingReserve, uint32 reservePPM) external;\\n\\n    function burnFromWithReserve(address payer, uint256 targetTotalBurnAmount, uint32 _reservePPM) external returns (uint256);\\n\\n    function burnWithReserve(uint256 amountExcludingReserve, uint32 reservePPM) external returns (uint256);\\n\\n    function notifyLoss(uint256 amount) external;\\n}\\n\",\"keccak256\":\"0xb06c0141cd64d092f192123055154ef58f9aafe3f7b4fc56ac41e75659727990\",\"license\":\"MIT\"},\"contracts/interface/IReserve.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IERC20.sol\\\";\\n\\ninterface IReserve is IERC20 {\\n   function invest(uint256 amount, uint256 expected) external returns (uint256);\\n   function checkQualified(address sender, address[] calldata helpers) external view;\\n}\",\"keccak256\":\"0x3b46b47f54a43bf2da382a4e5cc70e72a1aeb7845c75d30a04809ecccf2019dc\",\"license\":\"MIT\"},\"contracts/utils/ERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// Copied and adjusted from OpenZeppelin\\n// Adjustments:\\n// - modifications to support ERC-677\\n// - removed require messages to save space\\n// - removed unnecessary require statements\\n// - removed GSN Context\\n// - upgraded to 0.8 to drop SafeMath\\n// - let name() and symbol() be implemented by subclass\\n// - infinite allowance support, with 2^255 and above considered infinite\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../interface/IERC20.sol\\\";\\nimport \\\"../interface/IERC677Receiver.sol\\\";\\n\\n/**\\n * @dev Implementation of the `IERC20` interface.\\n *\\n * This implementation is agnostic to the way tokens are created. This means\\n * that a supply mechanism has to be added in a derived contract using `_mint`.\\n * For a generic mechanism see `ERC20Mintable`.\\n *\\n * *For a detailed writeup see our guide [How to implement supply\\n * mechanisms](https://forum.zeppelin.solutions/t/how-to-implement-erc20-supply-mechanisms/226).*\\n *\\n * We have followed general OpenZeppelin guidelines: functions revert instead\\n * of returning `false` on failure. This behavior is nonetheless conventional\\n * and does not conflict with the expectations of ERC20 applications.\\n *\\n * Additionally, an `Approval` event is emitted on calls to `transferFrom`.\\n * This allows applications to reconstruct the allowance for all accounts just\\n * by listening to said events. Other implementations of the EIP may not emit\\n * these events, as it isn't required by the specification.\\n *\\n */\\n\\nabstract contract ERC20 is IERC20 {\\n    mapping(address account => uint256 balance) private _balances;\\n\\n    mapping(address account => mapping(address spender => uint256 allowance)) private _allowances;\\n\\n    uint256 internal constant INFINITY = (1 << 255);\\n\\n    uint256 private _totalSupply;\\n\\n    uint8 public immutable override decimals;\\n\\n    // Copied from https://github.com/OpenZeppelin/openzeppelin-contracts/pull/4139/files#diff-fa792f7d08644eebc519dac2c29b00a54afc4c6a76b9ef3bba56c8401fe674f6\\n    // Indicates an error related to the current balance of a sender. Used in transfers.\\n    error ERC20InsufficientBalance(address sender, uint256 balance, uint256 needed);\\n    // Indicates a failure with the spender\\u2019s allowance. Used in transfers.\\n    error ERC20InsufficientAllowance(address spender, uint256 allowance, uint256 needed);\\n\\n    constructor(uint8 _decimals) {\\n        decimals = _decimals;\\n    }\\n\\n    /**\\n     * @dev See `IERC20.totalSupply`.\\n     */\\n    function totalSupply() public view override returns (uint256) {\\n        return _totalSupply;\\n    }\\n\\n    /**\\n     * @dev See `IERC20.balanceOf`.\\n     */\\n    function balanceOf(address account) public view override returns (uint256) {\\n        return _balances[account];\\n    }\\n\\n    /**\\n     * @dev See `IERC20.transfer`.\\n     *\\n     * Requirements:\\n     *\\n     * - `recipient` cannot be the zero address.\\n     * - the caller must have a balance of at least `amount`.\\n     */\\n    function transfer(address recipient, uint256 amount) public virtual override returns (bool) {\\n        _transfer(msg.sender, recipient, amount);\\n        return true;\\n    }\\n\\n    /**\\n     * @dev See `IERC20.allowance`.\\n     */\\n    function allowance(address owner, address spender) external view override returns (uint256) {\\n        return _allowance(owner, spender);\\n    }\\n\\n    function _allowance(address owner, address spender) internal view virtual returns (uint256) {\\n        return _allowances[owner][spender];\\n    }\\n\\n    /**\\n     * @dev See `IERC20.approve`.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     */\\n    function approve(address spender, uint256 value) external override returns (bool) {\\n        _approve(msg.sender, spender, value);\\n        return true;\\n    }\\n\\n    /**\\n     * @dev See `IERC20.transferFrom`.\\n     *\\n     * Emits an `Approval` event indicating the updated allowance. This is not\\n     * required by the EIP. See the note at the beginning of `ERC20`;\\n     *\\n     * Requirements:\\n     * - `sender` and `recipient` cannot be the zero address.\\n     * - `sender` must have a balance of at least `value`.\\n     * - the caller must have allowance for `sender`'s tokens of at least\\n     * `amount`.\\n     */\\n    function transferFrom(address sender, address recipient, uint256 amount) external override returns (bool) {\\n        _transfer(sender, recipient, amount);\\n        _useAllowance(sender, msg.sender, amount);\\n        return true;\\n    }\\n\\n    function _useAllowance(address owner, address spender, uint256 amount) internal {\\n        uint256 currentAllowance = _allowance(owner, spender);\\n        if (currentAllowance < INFINITY) {\\n            // Only decrease the allowance if it was not set to 'infinite'\\n            // Documented in github.com/aktionariat/contracts/blob/master/doc/infiniteallowance.md\\n            if (currentAllowance < amount) revert ERC20InsufficientAllowance(owner, currentAllowance, amount);\\n            _approve(owner, spender, currentAllowance - amount);\\n        }\\n    }\\n\\n    /**\\n     * @dev Moves tokens `amount` from `sender` to `recipient`.\\n     *\\n     * This is internal function is equivalent to `transfer`, and can be used to\\n     * e.g. implement automatic token fees, slashing mechanisms, etc.\\n     *\\n     * Emits a `Transfer` event.\\n     *\\n     * Requirements:\\n     *\\n     * - `sender` cannot be the zero address.\\n     * - `recipient` cannot be the zero address.\\n     * - `sender` must have a balance of at least `amount`.\\n     */\\n    function _transfer(address sender, address recipient, uint256 amount) internal virtual {\\n        require(recipient != address(0));\\n\\n        _beforeTokenTransfer(sender, recipient, amount);\\n        if (_balances[sender] < amount) revert ERC20InsufficientBalance(sender, _balances[sender], amount);\\n        _balances[sender] -= amount;\\n        _balances[recipient] += amount;\\n        emit Transfer(sender, recipient, amount);\\n    }\\n\\n    /** @dev Creates `amount` tokens and assigns them to `account`, increasing\\n     * the total supply.\\n     *\\n     * Emits a `Transfer` event with `from` set to the zero address.\\n     *\\n     * Requirements\\n     *\\n     * - `to` cannot be the zero address.\\n     */\\n    function _mint(address recipient, uint256 amount) internal virtual {\\n        require(recipient != address(0));\\n\\n        _beforeTokenTransfer(address(0), recipient, amount);\\n\\n        _totalSupply += amount;\\n        _balances[recipient] += amount;\\n        emit Transfer(address(0), recipient, amount);\\n    }\\n\\n    /**\\n     * @dev Destroys `amount` tokens from `account`, reducing the\\n     * total supply.\\n     *\\n     * Emits a `Transfer` event with `to` set to the zero address.\\n     */\\n    function _burn(address account, uint256 amount) internal virtual {\\n        _beforeTokenTransfer(account, address(0), amount);\\n\\n        _totalSupply -= amount;\\n        _balances[account] -= amount;\\n        emit Transfer(account, address(0), amount);\\n    }\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the `owner`s tokens.\\n     *\\n     * This is internal function is equivalent to `approve`, and can be used to\\n     * e.g. set automatic allowances for certain subsystems, etc.\\n     *\\n     * Emits an `Approval` event.\\n     */\\n    function _approve(address owner, address spender, uint256 value) internal {\\n        _allowances[owner][spender] = value;\\n        emit Approval(owner, spender, value);\\n    }\\n\\n    /**\\n     * @dev Hook that is called before any transfer of tokens. This includes\\n     * minting and burning.\\n     *\\n     * Calling conditions:\\n     *\\n     * - when `from` and `to` are both non-zero, `amount` of ``from``'s tokens\\n     * will be to transferred to `to`.\\n     * - when `from` is zero, `amount` tokens will be minted for `to`.\\n     * - when `to` is zero, `amount` of ``from``'s tokens will be burned.\\n     * - `from` and `to` are never both zero.\\n     *\\n     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].\\n     */\\n    function _beforeTokenTransfer(address from, address to, uint256 amount) internal virtual {}\\n}\\n\",\"keccak256\":\"0xff0b86b0b91dad77933e491ea0e11ee11a3be7caa4e5d0e449b66dca1f4c77c9\",\"license\":\"MIT\"},\"contracts/utils/ERC20PermitLight.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// Copied from https://github.com/transmissions11/solmate/blob/main/src/tokens/ERC20.sol\\n// and modified it.\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./ERC20.sol\\\";\\n\\nabstract contract ERC20PermitLight is ERC20 {\\n    /*//////////////////////////////////////////////////////////////\\n                            EIP-2612 STORAGE\\n    //////////////////////////////////////////////////////////////*/\\n\\n    mapping(address account => uint256 nonce) public nonces;\\n\\n    /*//////////////////////////////////////////////////////////////\\n                             EIP-2612 LOGIC\\n    //////////////////////////////////////////////////////////////*/\\n\\n    function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s) public {\\n        require(deadline >= block.timestamp, \\\"PERMIT_DEADLINE_EXPIRED\\\");\\n\\n        unchecked {\\n            // unchecked to save a little gas with the nonce increment...\\n            address recoveredAddress = ecrecover(\\n                keccak256(\\n                    abi.encodePacked(\\n                        \\\"\\\\x19\\\\x01\\\",\\n                        DOMAIN_SEPARATOR(),\\n                        keccak256(\\n                            abi.encode(\\n                                // keccak256(\\\"Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)\\\"),\\n                                bytes32(0x6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c9),\\n                                owner,\\n                                spender,\\n                                value,\\n                                nonces[owner]++,\\n                                deadline\\n                            )\\n                        )\\n                    )\\n                ),\\n                v,\\n                r,\\n                s\\n            );\\n\\n            require(recoveredAddress != address(0) && recoveredAddress == owner, \\\"INVALID_SIGNER\\\");\\n            _approve(recoveredAddress, spender, value);\\n        }\\n    }\\n\\n    function DOMAIN_SEPARATOR() public view returns (bytes32) {\\n        return\\n            keccak256(\\n                abi.encode(\\n                    //keccak256(\\\"EIP712Domain(uint256 chainId,address verifyingContract)\\\");\\n                    bytes32(0x47e79534a245952e8b16893a336b85a3d9ea9fa8c573f3d803afb92a79469218),\\n                    block.chainid,\\n                    address(this)\\n                )\\n            );\\n    }\\n}\\n\",\"keccak256\":\"0x646faabf144ee832204ff8068f113c88a2766983eab58a1bc2ad1b4c61aa40b7\",\"license\":\"MIT\"},\"contracts/utils/MathUtil.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @title Functions for share valuation\\n */\\ncontract MathUtil {\\n    uint256 internal constant ONE_DEC18 = 10 ** 18;\\n\\n    // Let's go for 12 digits of precision (18-6)\\n    uint256 internal constant THRESH_DEC18 = 10 ** 6;\\n\\n    /**\\n     * @notice Cubic root with Halley approximation\\n     *         Number 1e18 decimal\\n     * @param _v     number for which we calculate x**(1/3)\\n     * @return returns _v**(1/3)\\n     */\\n    function _cubicRoot(uint256 _v) internal pure returns (uint256) {\\n        // Good first guess for _v slightly above 1.0, which is often the case in the Frankencoin system\\n        uint256 x = _v > ONE_DEC18 && _v < 10 ** 19 ? (_v - ONE_DEC18) / 3 + ONE_DEC18 : ONE_DEC18;\\n        uint256 diff;\\n        do {\\n            uint256 powX3 = _mulD18(_mulD18(x, x), x);\\n            uint256 xnew = _mulDiv(x, (powX3 + 2 * _v), (2 * powX3 + _v));\\n            diff = xnew > x ? xnew - x : x - xnew;\\n            x = xnew;\\n        } while (diff > THRESH_DEC18);\\n        return x;\\n    }\\n\\n    /**\\n     * Divides and multiplies, with divisor > 0.\\n     */\\n    function _mulDiv(uint256 x, uint256 factor, uint256 divisor) internal pure returns (uint256) {\\n        if (factor == 0) {\\n            return 0;\\n        } else if (type(uint256).max / factor > x) {\\n            return (x * factor) / divisor;\\n        } else {\\n            // divide first to avoid overflow\\n            return x > factor ? (x / divisor) * factor : (factor / divisor) * x;\\n        }\\n    }\\n\\n    function _mulD18(uint256 _a, uint256 _b) internal pure returns (uint256) {\\n        return (_a * _b) / ONE_DEC18;\\n    }\\n\\n    function _divD18(uint256 _a, uint256 _b) internal pure returns (uint256) {\\n        return (_a * ONE_DEC18) / _b;\\n    }\\n\\n    function _power3(uint256 _x) internal pure returns (uint256) {\\n        return _mulD18(_mulD18(_x, _x), _x);\\n    }\\n\\n    function _min(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a < b ? a : b;\\n    }\\n}\\n\",\"keccak256\":\"0xf07578927e4a63cac944e3e757a0b14a524b022c78e8789732ef90cedc3c322e\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60e06040523480156200001157600080fd5b50604051620040b9380380620040b983398101604081905262000034916200009d565b601260805260a081905260405130906200004e906200008f565b6001600160a01b039091168152602001604051809103906000f0801580156200007b573d6000803e3d6000fd5b506001600160a01b031660c05250620000b7565b61228d8062001e2c83390190565b600060208284031215620000b057600080fd5b5051919050565b60805160a05160c051611ce362000149600039600081816104ef015281816105d9015281816106dd015281816108580152818161089b015281816108cb01528181610a3901528181610a9901528181610b4501528181610c9901528181610f41015281816111e60152818161128e01526116dd0152600081816102a00152610e9b015260006102da0152611ce36000f3fe608060405234801561001057600080fd5b50600436106102115760003560e01c80638112eb2b11610125578063c7641866116100ad578063d505accf1161007c578063d505accf1461052c578063dd62ed3e1461053f578063e093c8a414610552578063f399e22e14610565578063f46eccc41461057857600080fd5b8063c7641866146104d7578063cd3293de146104ea578063d1a15ff114610511578063d38bb0091461052457600080fd5b8063a47d75ad116100f4578063a47d75ad1461045f578063a9059cbb14610472578063aa271e1a14610485578063aa5dd7f114610498578063b52c696d146104c457600080fd5b80638112eb2b1461041157806391a0ac6a1461042457806395d89b411461042c5780639b404da61461044c57600080fd5b80633644e515116101a857806361f3d1101161017757806361f3d1101461039257806370a08231146103a557806376c7a3c7146103ce57806379cc6790146103de5780637ecebe00146103f157600080fd5b80633644e5151461032157806340c10f191461032957806342966c681461033e57806355f575101461035157600080fd5b80631a46c7e9116101e45780631a46c7e91461029b57806323b872dd146102c2578063313ce567146102d5578063315f3e721461030e57600080fd5b806306fdde0314610216578063095ea7b31461024f57806316e0e5381461027257806318160ddd14610293575b600080fd5b60408051808201909152600b81526a233930b735b2b731b7b4b760a91b60208201525b6040516102469190611734565b60405180910390f35b61026261025d36600461179e565b610598565b6040519015158152602001610246565b6102856102803660046117dc565b6105af565b604051908152602001610246565b600254610285565b6102857f000000000000000000000000000000000000000000000000000000000000000081565b6102626102d0366004611808565b610653565b6102fc7f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff9091168152602001610246565b61028561031c366004611844565b610675565b61028561073c565b61033c61033736600461179e565b610795565b005b61033c61034c366004611880565b6107f6565b61037a61035f366004611899565b6006602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610246565b61033c6103a0366004611880565b610803565b6102856103b3366004611899565b6001600160a01b031660009081526020819052604090205490565b610285683635c9adc5dea0000081565b61033c6103ec36600461179e565b610943565b6102856103ff366004611899565b60036020526000908152604090205481565b61033c61041f3660046118b4565b6109a0565b610285610a8f565b6040805180820190915260048152632d21a42360e11b6020820152610239565b61033c61045a36600461194a565b610af5565b61028561046d3660046117dc565b610c0a565b61026261048036600461179e565b610cd9565b610262610493366004611899565b610ce6565b61037a6104a6366004611899565b6001600160a01b039081166000908152600660205260409020541690565b61033c6104d2366004611899565b610d27565b61033c6104e53660046117dc565b610d76565b61037a7f000000000000000000000000000000000000000000000000000000000000000081565b61033c61051f3660046119fc565b610e99565b610285610fc3565b61033c61053a366004611a53565b610fdb565b61028561054d366004611ac6565b6111d0565b6102856105603660046117dc565b6111dc565b61033c610573366004611af0565b611281565b610285610586366004611899565b60056020526000908152604090205481565b60006105a5338484611367565b5060015b92915050565b600080620f42406105c68563ffffffff8616611b59565b6105d09190611b70565b905060006106137f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031660009081526020819052604090205490565b9050600061061f610fc3565b90508082101561064857806106348385611b59565b61063e9190611b70565b93505050506105a9565b8293505050506105a9565b60006106608484846113c9565b61066b8433846114e0565b5060019392505050565b600061068033610ce6565b1580156106ac5750336000908152600660205260409020546106aa906001600160a01b0316610ce6565b155b156106ca57604051633e34a41b60e21b815260040160405180910390fd5b60006106d684846105af565b90506107037f000000000000000000000000000000000000000000000000000000000000000086836113c9565b61070d858561154e565b61071d63ffffffff841685611b59565b6004600082825461072e9190611b92565b909155509095945050505050565b604080517f47e79534a245952e8b16893a336b85a3d9ea9fa8c573f3d803afb92a794692186020820152469181019190915230606082015260009060800160405160208183030381529060405280519060200120905090565b61079e33610ce6565b1580156107ca5750336000908152600660205260409020546107c8906001600160a01b0316610ce6565b155b156107e857604051633e34a41b60e21b815260040160405180910390fd5b6107f282826115d8565b5050565b610800338261154e565b50565b61080c33610ce6565b158015610838575033600090815260066020526040902054610836906001600160a01b0316610ce6565b155b1561085657604051633e34a41b60e21b815260040160405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166000908152602081905260409020548181106108c6576108c17f000000000000000000000000000000000000000000000000000000000000000033846113c9565b610904565b6108f17f000000000000000000000000000000000000000000000000000000000000000033836113c9565b610904336108ff8385611b92565b6115d8565b604080518381526020810183905233917f68968dce3e47f9519d4b1886045d266b13a87545a0831788b35556bbf8abb6c7910160405180910390a25050565b61094c33610ce6565b158015610978575033600090815260066020526040902054610976906001600160a01b0316610ce6565b155b1561099657604051633e34a41b60e21b815260040160405180910390fd5b6107f2828261154e565b6109a933610ce6565b1580156109d55750336000908152600660205260409020546109d3906001600160a01b0316610ce6565b155b156109f357604051633e34a41b60e21b815260040160405180910390fd5b6000620f424083610a048483611ba5565b610a0e9190611ba5565b610a1e9063ffffffff1686611b59565b610a289190611b70565b9050610a3485826115d8565b610a627f00000000000000000000000000000000000000000000000000000000000000006108ff8387611b92565b610a7263ffffffff841685611b59565b60046000828254610a839190611bc2565b90915550505050505050565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166000908152602081905260408120546000610ad2610fc3565b9050808211610ae45760009250505090565b610aee8183611b92565b9250505090565b6001600160a01b038516600090815260056020526040902054421115610b2e5760405163ecdd1c2960e01b815260040160405180910390fd5b60405163352e3a8360e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063352e3a8390610b7e90339088908890600401611bd5565b60006040518083038186803b158015610b9657600080fd5b505afa158015610baa573d6000803e3d6000fd5b505050506001600160a01b03851660008181526005602052604080822091909155517fd60c86e83346fdbe3124cb7d1cba32973a9f62d05c4ec801bfe6c09d1038038190610bfb9085908590611c58565b60405180910390a25050505050565b6000610c1533610ce6565b158015610c41575033600090815260066020526040902054610c3f906001600160a01b0316610ce6565b155b15610c5f57604051633e34a41b60e21b815260040160405180910390fd5b6000610c6b84846111dc565b9050610c7d63ffffffff841682611b59565b60046000828254610c8e9190611b92565b90915550610cc890507f000000000000000000000000000000000000000000000000000000000000000033610cc38785611b92565b6113c9565b610cd2338261154e565b9392505050565b60006105a53384846113c9565b6001600160a01b038116600090815260056020526040812054158015906105a95750506001600160a01b031660009081526005602052604090205442101590565b610d3033610ce6565b610d4d57604051633e34a41b60e21b815260040160405180910390fd5b6001600160a01b0316600090815260066020526040902080546001600160a01b03191633179055565b610d7f33610ce6565b158015610dab575033600090815260066020526040902054610da9906001600160a01b0316610ce6565b155b15610dc957604051633e34a41b60e21b815260040160405180910390fd5b610dd3338361154e565b6000610de563ffffffff831684611b59565b9050600454811115610e3957600454604080519182526000602083015233917fccd7238a587ca4ccdab9f52533787066603f50db964bc819b82ad7e7036e1769910160405180910390a26000600455505050565b8060046000828254610e4b9190611b92565b909155505060045460405133917fccd7238a587ca4ccdab9f52533787066603f50db964bc819b82ad7e7036e176991610e8c91858252602082015260400190565b60405180910390a2505050565b7f0000000000000000000000000000000000000000000000000000000000000000841015610eda57604051631260d0af60e31b815260040160405180910390fd5b683635c9adc5dea00000831015610f045760405163732f941360e01b815260040160405180910390fd5b6001600160a01b03851660009081526005602052604090205415610f3b57604051630ea075bf60e21b815260040160405180910390fd5b610f66337f0000000000000000000000000000000000000000000000000000000000000000856113c9565b610f708442611bc2565b6001600160a01b038616600081815260056020526040908190209290925590517f97326258efdae63280617ca33884e507791c2abeed7b82acd77f1853394ef94b90610bfb908790879087908790611c74565b6000620f4240600454610fd69190611b70565b905090565b428410156110305760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f4558504952454400000000000000000060448201526064015b60405180910390fd5b6000600161103c61073c565b6001600160a01b038a811660008181526003602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938d166060840152608083018c905260a083019390935260c08083018b90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600084529083018083525260ff871690820152606081018590526080810184905260a0016020604051602081039080840390855afa158015611148573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381161580159061117e5750876001600160a01b0316816001600160a01b0316145b6111bb5760405162461bcd60e51b815260206004820152600e60248201526d24a72b20a624a22fa9a4a3a722a960911b6044820152606401611027565b6111c6818888611367565b5050505050505050565b6000610cd2838361166d565b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016600090815260208190526040812054600061121f610fc3565b90506000818310611236578463ffffffff16611251565b816112478463ffffffff8816611b59565b6112519190611b70565b905061126081620f4240611b92565b61126d87620f4240611b59565b6112779190611b70565b9695505050505050565b60025415801561131057507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166318160ddd6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156112ea573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061130e9190611c94565b155b61131957600080fd5b6001600160a01b038316600081815260056020526040808220429055517f97326258efdae63280617ca33884e507791c2abeed7b82acd77f1853394ef94b91610e8c91819087908790611c74565b6001600160a01b0383811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591015b60405180910390a3505050565b6001600160a01b0382166113dc57600080fd5b6001600160a01b03831660009081526020819052604090205481111561143f576001600160a01b0383166000818152602081905260409081902054905163391434e360e21b81526004810192909252602482015260448101829052606401611027565b6001600160a01b03831660009081526020819052604081208054839290611467908490611b92565b90915550506001600160a01b03821660009081526020819052604081208054839290611494908490611bc2565b92505081905550816001600160a01b0316836001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516113bc91815260200190565b60006114ec848461166d565b9050600160ff1b811015611548578181101561153457604051637dc7a0d960e11b81526001600160a01b03851660048201526024810182905260448101839052606401611027565b61154884846115438585611b92565b611367565b50505050565b80600260008282546115609190611b92565b90915550506001600160a01b0382166000908152602081905260408120805483929061158d908490611b92565b90915550506040518181526000906001600160a01b038416907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906020015b60405180910390a35050565b6001600160a01b0382166115eb57600080fd5b80600260008282546115fd9190611bc2565b90915550506001600160a01b0382166000908152602081905260408120805483929061162a908490611bc2565b90915550506040518181526001600160a01b038316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906020016115cc565b6001600160a01b03808316600090815260016020908152604080832093851683529290529081205480156116a25790506105a9565b6116ab83610ce6565b806116d557506001600160a01b038084166000908152600660205260409020546116d59116610ce6565b8061171157507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316836001600160a01b0316145b1561172357600160ff1b9150506105a9565b60009150506105a9565b5092915050565b600060208083528351808285015260005b8181101561176157858101830151858201604001528201611745565b506000604082860101526040601f19601f8301168501019250505092915050565b80356001600160a01b038116811461179957600080fd5b919050565b600080604083850312156117b157600080fd5b6117ba83611782565b946020939093013593505050565b803563ffffffff8116811461179957600080fd5b600080604083850312156117ef57600080fd5b823591506117ff602084016117c8565b90509250929050565b60008060006060848603121561181d57600080fd5b61182684611782565b925061183460208501611782565b9150604084013590509250925092565b60008060006060848603121561185957600080fd5b61186284611782565b925060208401359150611877604085016117c8565b90509250925092565b60006020828403121561189257600080fd5b5035919050565b6000602082840312156118ab57600080fd5b610cd282611782565b600080600080608085870312156118ca57600080fd5b6118d385611782565b9350602085013592506118e8604086016117c8565b91506118f6606086016117c8565b905092959194509250565b60008083601f84011261191357600080fd5b50813567ffffffffffffffff81111561192b57600080fd5b60208301915083602082850101111561194357600080fd5b9250929050565b60008060008060006060868803121561196257600080fd5b61196b86611782565b9450602086013567ffffffffffffffff8082111561198857600080fd5b818801915088601f83011261199c57600080fd5b8135818111156119ab57600080fd5b8960208260051b85010111156119c057600080fd5b6020830196508095505060408801359150808211156119de57600080fd5b506119eb88828901611901565b969995985093965092949392505050565b600080600080600060808688031215611a1457600080fd5b611a1d86611782565b94506020860135935060408601359250606086013567ffffffffffffffff811115611a4757600080fd5b6119eb88828901611901565b600080600080600080600060e0888a031215611a6e57600080fd5b611a7788611782565b9650611a8560208901611782565b95506040880135945060608801359350608088013560ff81168114611aa957600080fd5b9699959850939692959460a0840135945060c09093013592915050565b60008060408385031215611ad957600080fd5b611ae283611782565b91506117ff60208401611782565b600080600060408486031215611b0557600080fd5b611b0e84611782565b9250602084013567ffffffffffffffff811115611b2a57600080fd5b611b3686828701611901565b9497909650939450505050565b634e487b7160e01b600052601160045260246000fd5b80820281158282048414176105a9576105a9611b43565b600082611b8d57634e487b7160e01b600052601260045260246000fd5b500490565b818103818111156105a9576105a9611b43565b63ffffffff82811682821603908082111561172d5761172d611b43565b808201808211156105a9576105a9611b43565b6001600160a01b03848116825260406020808401829052908301849052600091859160608501845b87811015611c225783611c0f86611782565b1682529382019390820190600101611bfd565b5098975050505050505050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b602081526000611c6c602083018486611c2f565b949350505050565b848152836020820152606060408201526000611277606083018486611c2f565b600060208284031215611ca657600080fd5b505191905056fea26469706673582212201a4a5479f6dde50a85897e6d6b75478511fd4ae86229beb58f17248d2ecd57d764736f6c6343000814003360c060405234801561001057600080fd5b506040516200228d3803806200228d83398101604081905261003191610047565b60126080526001600160a01b031660a052610077565b60006020828403121561005957600080fd5b81516001600160a01b038116811461007057600080fd5b9392505050565b60805160a0516121b8620000d5600039600081816104a7015281816107a7015281816108fd01528181610ac701528181610b7801528181610c9301528181610f8301528181610ffd015261130d015260006102fd01526121b86000f3fe608060405234801561001057600080fd5b50600436106101f05760003560e01c806370a082311161010f578063a9059cbb116100a2578063d505accf11610071578063d505accf146104c9578063d87aa643146104dc578063d8bff5a5146104ef578063dd62ed3e1461050257600080fd5b8063a9059cbb1461046f578063ad08ce5b14610482578063b0c2bf0614610495578063c4d4803a146104a257600080fd5b806391ac6f99116100de57806391ac6f991461042257806395d89b41146104355780639823004f14610454578063a035b1fe1461046757600080fd5b806370a08231146103b35780637ecebe00146103dc578063820710af146103fc57806384a7aa0c1461040f57600080fd5b806323b872dd116101875780633644e515116101565780633644e515146103445780633ec161941461034c578063587cde1e1461035f5780635895b773146103a057600080fd5b806323b872dd146102c8578063250f25f4146102db578063313ce567146102f8578063352e3a831461033157600080fd5b8063151535b9116101c3578063151535b91461028557806318160ddd146102985780631e9a6950146102a05780632295abea146102b357600080fd5b806306fdde03146101f5578063095ea7b3146102395780630d15fd771461025c5780630e89c37014610272575b600080fd5b6040805180820190915260168152754672616e6b656e636f696e20506f6f6c20536861726560501b60208201525b6040516102309190611cb7565b60405180910390f35b61024c610247366004611d21565b610515565b6040519015158152602001610230565b61026461052c565b604051908152602001610230565b610264610280366004611d4b565b610587565b61024c610293366004611d7e565b6105ae565b600254610264565b6102646102ae366004611d21565b6105f6565b6102c66102c1366004611de4565b610603565b005b61024c6102d6366004611e2f565b6106d2565b6102e3600381565b60405163ffffffff9091168152602001610230565b61031f7f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff9091168152602001610230565b6102c661033f366004611e6b565b6106f4565b610264610747565b61026461035a366004611ebd565b6107a0565b61038861036d366004611d7e565b6005602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610230565b6102646103ae366004611e6b565b61082d565b6102646103c1366004611d7e565b6001600160a01b031660009081526020819052604090205490565b6102646103ea366004611d7e565b60036020526000908152604090205481565b6102c661040a366004611ed6565b6108e7565b61026461041d366004611d7e565b610a0a565b610264610430366004611f41565b610a39565b60408051808201909152600381526246505360e81b6020820152610223565b6102c6610462366004611d7e565b610a6b565b610264610ac2565b61024c61047d366004611d21565b610c1d565b610264610490366004611ebd565b610c2a565b61026465076a7000000081565b6103887f000000000000000000000000000000000000000000000000000000000000000081565b6102c66104d7366004611f83565b610d6e565b6102646104ea366004611ff6565b610f5e565b6102646104fd366004611d7e565b6111cc565b610264610510366004612018565b61122d565b600061052233848461125a565b5060015b92915050565b600454600090600160c01b90046001600160401b03164260141b6105509190612061565b6001600160401b031661056260025490565b61056c9190612081565b60045461058291906001600160c01b0316612098565b905090565b6000806105953386866112bc565b9050828110156105a457600080fd5b90505b9392505050565b6001600160a01b03811660009081526006602052604081205465076a70000000906105e5906001600160401b03164260141b612061565b6001600160401b0316101592915050565b60006105a73384846112bc565b600061060f33836113e4565b90506000805b848110801561062357508282105b1561067f5761066186868381811061063d5761063d6120ab565b90506020020160208101906106529190611d7e565b61065c84866120c1565b6113e4565b61066b9083612098565b915080610677816120d4565b915050610615565b506000811161068d57600080fd5b818161069761052c565b6106a191906120c1565b6106ab91906120c1565b6001600160c01b0316600160c01b4260141b6001600160401b031602176004555050505050565b60006106df8484846114d4565b6106ea8433846115f6565b5060019392505050565b600061070184848461082d565b905061070b61052c565b6107169060c8612081565b61072282612710612081565b10156107415760405163bcfcdc1160e01b815260040160405180910390fd5b50505050565b604080517f47e79534a245952e8b16893a336b85a3d9ea9fa8c573f3d803afb92a794692186020820152469181019190915230606082015260009060800160405160208183030381529060405280519060200120905090565b60006105267f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166391a0ac6a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610803573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061082791906120ed565b83611676565b600080610839856111cc565b90506108458484611714565b61084e57600080fd5b60005b838110156108de57600085858381811061086d5761086d6120ab565b90506020020160208101906108829190611d7e565b9050866001600160a01b0316816001600160a01b0316036108a257600080fd5b6108ac87826117ed565b6108b557600080fd5b6108be816111cc565b6108c89084612098565b92505080806108d6906120d4565b915050610851565b50949350505050565b6108fb670de0b6b3a76400006103e8612081565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166391a0ac6a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610959573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061097d91906120ed565b1061098757600080fd5b6109923385856106f4565b60005b81811015610a035760008383838181106109b1576109b16120ab565b90506020020160208101906109c69190611d7e565b90506109f0816109eb836001600160a01b031660009081526020819052604090205490565b611853565b50806109fb816120d4565b915050610995565b5050505050565b6000610a1461052c565b610a1d836111cc565b610a2f90670de0b6b3a7640000612081565b610526919061211c565b6000610a468533856115f6565b6000610a538686866112bc565b905082811015610a6257600080fd5b95945050505050565b3360008181526005602052604080822080546001600160a01b0319166001600160a01b03861690811790915590519092917fd000f39f92c3ed77f890f16b6ced1555e0ab2cdf470522d2210de67d8c83d45b91a350565b6000807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166391a0ac6a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610b23573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b4791906120ed565b9050801580610b565750600254155b15610b6a57670de0b6b3a764000091505090565b600254670de0b6b3a76400007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166391a0ac6a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610bd4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610bf891906120ed565b610c03906003612081565b610c0d9190612081565b610c17919061211c565b91505090565b60006105223384846114d4565b600080610c3660025490565b905080610c4b670de0b6b3a764000085612098565b10610c8f5760405162461bcd60e51b815260206004820152600f60248201526e746f6f206d616e792073686172657360881b60448201526064015b60405180910390fd5b60007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166391a0ac6a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015610cef573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d1391906120ed565b905060006103e8610d26866103e5612081565b610d30919061211c565b90506000610d5883610d53610d4e610d4886896120c1565b886118e9565b611908565b611919565b9050610d6481846120c1565b9695505050505050565b42841015610dbe5760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f455850495245440000000000000000006044820152606401610c86565b60006001610dca610747565b6001600160a01b038a811660008181526003602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938d166060840152608083018c905260a083019390935260c08083018b90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600084529083018083525260ff871690820152606081018590526080810184905260a0016020604051602081039080840390855afa158015610ed6573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811615801590610f0c5750876001600160a01b0316816001600160a01b0316145b610f495760405162461bcd60e51b815260206004820152600e60248201526d24a72b20a624a22fa9a4a3a722a960911b6044820152606401610c86565b610f5481888861125a565b5050505050505050565b6040516323b872dd60e01b8152336004820152306024820152604481018390526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906323b872dd906064016020604051808303816000875af1158015610fd4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ff89190612130565b5060007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166391a0ac6a6040518163ffffffff1660e01b8152600401602060405180830381865afa158015611059573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061107d91906120ed565b9050611093670de0b6b3a76400006103e8612081565b8110156110d15760405162461bcd60e51b815260206004820152600c60248201526b696e7375662065717569747960a01b6044820152606401610c86565b60006110f6858311156110ed576110e886846120c1565b6110f0565b60005b86611676565b90508381101561110557600080fd5b61110f338261192e565b7fd98fb7c2b7c7b545387da80b92c08bc5d2a4b922fb74851c3d27ee07ca897bdf33828761113b610ac2565b604080516001600160a01b039095168552602085019390935291830152606082015260800160405180910390a16bffffffffffffffffffffffff61117e60025490565b11156111c45760405162461bcd60e51b81526020600482015260156024820152741d1bdd185b081cdd5c1c1b1e48195e18d959591959605a1b6044820152606401610c86565b949350505050565b6001600160a01b0381166000908152600660205260408120546111fb906001600160401b03164260141b612061565b6001600160401b0316611223836001600160a01b031660009081526020819052604090205490565b6105269190612081565b6001600160a01b0380831660009081526001602090815260408083209385168352929052908120546105a7565b6001600160a01b0383811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591015b60405180910390a3505050565b60006112c7846105ae565b6112d057600080fd5b60006112db83610c2a565b90506112e78584611853565b60405163a9059cbb60e01b81526001600160a01b038581166004830152602482018390527f0000000000000000000000000000000000000000000000000000000000000000169063a9059cbb906044016020604051808303816000875af1158015611356573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061137a9190612130565b507fd98fb7c2b7c7b545387da80b92c08bc5d2a4b922fb74851c3d27ee07ca897bdf856113a685612152565b836113af610ac2565b604080516001600160a01b039095168552602085019390935291830152606082015260800160405180910390a1949350505050565b6000806113f0846111cc565b9050808310611438576001600160a01b0384166000908152600660205260409020805467ffffffffffffffff19164260141b6001600160401b03161790559150819050610526565b6001600160a01b03841660009081526020819052604090205461145b84836120c1565b611465919061211c565b61147b906001600160401b034260141b166120c1565b6001600160a01b0385166000908152600660205260409020805467ffffffffffffffff19166001600160401b03929092169190911790556114bb846111cc565b6114c590826120c1565b915050610526565b5092915050565b6001600160a01b0382166114e757600080fd5b6114f28383836119cf565b6001600160a01b038316600090815260208190526040902054811115611555576001600160a01b0383166000818152602081905260409081902054905163391434e360e21b81526004810192909252602482015260448101829052606401610c86565b6001600160a01b0383166000908152602081905260408120805483929061157d9084906120c1565b90915550506001600160a01b038216600090815260208190526040812080548392906115aa908490612098565b92505081905550816001600160a01b0316836001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516112af91815260200190565b6001600160a01b03838116600090815260016020908152604080832093861683529290522054600160ff1b811015610741578181101561166257604051637dc7a0d960e11b81526001600160a01b03851660048201526024810182905260448101839052606401610c86565b610741848461167185856120c1565b61125a565b60008061168260025490565b905060006103e8611695856103e5612081565b61169f919061211c565b905060006116b7670de0b6b3a76400006103e8612081565b8610806116c2575082155b6116ea576116e583610d536116e06116da868b612098565b8a6118e9565b6119f3565b611708565b6116fe670de0b6b3a76400006103e8612081565b6117089084612098565b9050610d6483826120c1565b60006001821161172657506001610526565b60008383600081811061173b5761173b6120ab565b90506020020160208101906117509190611d7e565b905060015b838110156117e257816001600160a01b0316858583818110611779576117796120ab565b905060200201602081019061178e9190611d7e565b6001600160a01b0316116117a757600092505050610526565b8484828181106117b9576117b96120ab565b90506020020160208101906117ce9190611d7e565b9150806117da816120d4565b915050611755565b506001915050610526565b6000826001600160a01b0316826001600160a01b03160361181057506001610526565b6001600160a01b03821661182657506000610526565b6001600160a01b0380831660009081526005602052604090205461184c918591166117ed565b9050610526565b61185f826000836119cf565b806002600082825461187191906120c1565b90915550506001600160a01b0382166000908152602081905260408120805483929061189e9084906120c1565b90915550506040518181526000906001600160a01b038416907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906020015b60405180910390a35050565b6000816118fe670de0b6b3a764000085612081565b6105a7919061211c565b60006105266119178384611919565b835b6000670de0b6b3a76400006118fe8385612081565b6001600160a01b03821661194157600080fd5b61194d600083836119cf565b806002600082825461195f9190612098565b90915550506001600160a01b0382166000908152602081905260408120805483929061198c908490612098565b90915550506040518181526001600160a01b038316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906020016118dd565b80156119ee5760006119e18383611ada565b9050610741848383611b98565b505050565b600080670de0b6b3a764000083118015611a145750678ac7230489e8000083105b611a2657670de0b6b3a7640000611a4f565b670de0b6b3a76400006003611a3b82866120c1565b611a45919061211c565b611a4f9190612098565b905060005b6000611a69611a638485611919565b84611919565b90506000611aa184611a7c886002612081565b611a869085612098565b88611a92866002612081565b611a9c9190612098565b611c40565b9050838111611ab957611ab481856120c1565b611ac3565b611ac384826120c1565b909350915050620f42408111611a54575092915050565b60006001600160a01b03831615611b90576000611af6846111cc565b9050600083611b1a866001600160a01b031660009081526020819052604090205490565b611b249190612098565b9050611b30818361211c565b611b46906001600160401b034260141b166120c1565b6001600160a01b0386166000908152600660205260409020805467ffffffffffffffff19166001600160401b0392909216919091179055611b87818361216e565b92505050610526565b506000610526565b4260141b60006001600160a01b03851615611bf3576001600160a01b0385166000908152600660205260409020548490611bdb906001600160401b031684612061565b6001600160401b0316611bee9190612081565b611bf6565b60005b90508083611c0261052c565b611c0c91906120c1565b611c1691906120c1565b6001600160401b03909216600160c01b026001600160c01b03929092169190911760045550505050565b600082600003611c52575060006105a7565b83611c5f8460001961211c565b1115611c815781611c708486612081565b611c7a919061211c565b90506105a7565b828411611ca25783611c93838561211c565b611c9d9190612081565b611c7a565b82611cad838661211c565b611c7a9190612081565b600060208083528351808285015260005b81811015611ce457858101830151858201604001528201611cc8565b506000604082860101526040601f19601f8301168501019250505092915050565b80356001600160a01b0381168114611d1c57600080fd5b919050565b60008060408385031215611d3457600080fd5b611d3d83611d05565b946020939093013593505050565b600080600060608486031215611d6057600080fd5b611d6984611d05565b95602085013595506040909401359392505050565b600060208284031215611d9057600080fd5b6105a782611d05565b60008083601f840112611dab57600080fd5b5081356001600160401b03811115611dc257600080fd5b6020830191508360208260051b8501011115611ddd57600080fd5b9250929050565b600080600060408486031215611df957600080fd5b83356001600160401b03811115611e0f57600080fd5b611e1b86828701611d99565b909790965060209590950135949350505050565b600080600060608486031215611e4457600080fd5b611e4d84611d05565b9250611e5b60208501611d05565b9150604084013590509250925092565b600080600060408486031215611e8057600080fd5b611e8984611d05565b925060208401356001600160401b03811115611ea457600080fd5b611eb086828701611d99565b9497909650939450505050565b600060208284031215611ecf57600080fd5b5035919050565b60008060008060408587031215611eec57600080fd5b84356001600160401b0380821115611f0357600080fd5b611f0f88838901611d99565b90965094506020870135915080821115611f2857600080fd5b50611f3587828801611d99565b95989497509550505050565b60008060008060808587031215611f5757600080fd5b611f6085611d05565b9350611f6e60208601611d05565b93969395505050506040820135916060013590565b600080600080600080600060e0888a031215611f9e57600080fd5b611fa788611d05565b9650611fb560208901611d05565b95506040880135945060608801359350608088013560ff81168114611fd957600080fd5b9699959850939692959460a0840135945060c09093013592915050565b6000806040838503121561200957600080fd5b50508035926020909101359150565b6000806040838503121561202b57600080fd5b61203483611d05565b915061204260208401611d05565b90509250929050565b634e487b7160e01b600052601160045260246000fd5b6001600160401b038281168282160390808211156114cd576114cd61204b565b80820281158282048414176105265761052661204b565b808201808211156105265761052661204b565b634e487b7160e01b600052603260045260246000fd5b818103818111156105265761052661204b565b6000600182016120e6576120e661204b565b5060010190565b6000602082840312156120ff57600080fd5b5051919050565b634e487b7160e01b600052601260045260246000fd5b60008261212b5761212b612106565b500490565b60006020828403121561214257600080fd5b815180151581146105a757600080fd5b6000600160ff1b82016121675761216761204b565b5060000390565b60008261217d5761217d612106565b50069056fea26469706673582212202b4dcc6e9fe30462be0bf4fe7f944d4f23138707c5516adf2f49d85f8500df6c64736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106102115760003560e01c80638112eb2b11610125578063c7641866116100ad578063d505accf1161007c578063d505accf1461052c578063dd62ed3e1461053f578063e093c8a414610552578063f399e22e14610565578063f46eccc41461057857600080fd5b8063c7641866146104d7578063cd3293de146104ea578063d1a15ff114610511578063d38bb0091461052457600080fd5b8063a47d75ad116100f4578063a47d75ad1461045f578063a9059cbb14610472578063aa271e1a14610485578063aa5dd7f114610498578063b52c696d146104c457600080fd5b80638112eb2b1461041157806391a0ac6a1461042457806395d89b411461042c5780639b404da61461044c57600080fd5b80633644e515116101a857806361f3d1101161017757806361f3d1101461039257806370a08231146103a557806376c7a3c7146103ce57806379cc6790146103de5780637ecebe00146103f157600080fd5b80633644e5151461032157806340c10f191461032957806342966c681461033e57806355f575101461035157600080fd5b80631a46c7e9116101e45780631a46c7e91461029b57806323b872dd146102c2578063313ce567146102d5578063315f3e721461030e57600080fd5b806306fdde0314610216578063095ea7b31461024f57806316e0e5381461027257806318160ddd14610293575b600080fd5b60408051808201909152600b81526a233930b735b2b731b7b4b760a91b60208201525b6040516102469190611734565b60405180910390f35b61026261025d36600461179e565b610598565b6040519015158152602001610246565b6102856102803660046117dc565b6105af565b604051908152602001610246565b600254610285565b6102857f000000000000000000000000000000000000000000000000000000000000000081565b6102626102d0366004611808565b610653565b6102fc7f000000000000000000000000000000000000000000000000000000000000000081565b60405160ff9091168152602001610246565b61028561031c366004611844565b610675565b61028561073c565b61033c61033736600461179e565b610795565b005b61033c61034c366004611880565b6107f6565b61037a61035f366004611899565b6006602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610246565b61033c6103a0366004611880565b610803565b6102856103b3366004611899565b6001600160a01b031660009081526020819052604090205490565b610285683635c9adc5dea0000081565b61033c6103ec36600461179e565b610943565b6102856103ff366004611899565b60036020526000908152604090205481565b61033c61041f3660046118b4565b6109a0565b610285610a8f565b6040805180820190915260048152632d21a42360e11b6020820152610239565b61033c61045a36600461194a565b610af5565b61028561046d3660046117dc565b610c0a565b61026261048036600461179e565b610cd9565b610262610493366004611899565b610ce6565b61037a6104a6366004611899565b6001600160a01b039081166000908152600660205260409020541690565b61033c6104d2366004611899565b610d27565b61033c6104e53660046117dc565b610d76565b61037a7f000000000000000000000000000000000000000000000000000000000000000081565b61033c61051f3660046119fc565b610e99565b610285610fc3565b61033c61053a366004611a53565b610fdb565b61028561054d366004611ac6565b6111d0565b6102856105603660046117dc565b6111dc565b61033c610573366004611af0565b611281565b610285610586366004611899565b60056020526000908152604090205481565b60006105a5338484611367565b5060015b92915050565b600080620f42406105c68563ffffffff8616611b59565b6105d09190611b70565b905060006106137f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031660009081526020819052604090205490565b9050600061061f610fc3565b90508082101561064857806106348385611b59565b61063e9190611b70565b93505050506105a9565b8293505050506105a9565b60006106608484846113c9565b61066b8433846114e0565b5060019392505050565b600061068033610ce6565b1580156106ac5750336000908152600660205260409020546106aa906001600160a01b0316610ce6565b155b156106ca57604051633e34a41b60e21b815260040160405180910390fd5b60006106d684846105af565b90506107037f000000000000000000000000000000000000000000000000000000000000000086836113c9565b61070d858561154e565b61071d63ffffffff841685611b59565b6004600082825461072e9190611b92565b909155509095945050505050565b604080517f47e79534a245952e8b16893a336b85a3d9ea9fa8c573f3d803afb92a794692186020820152469181019190915230606082015260009060800160405160208183030381529060405280519060200120905090565b61079e33610ce6565b1580156107ca5750336000908152600660205260409020546107c8906001600160a01b0316610ce6565b155b156107e857604051633e34a41b60e21b815260040160405180910390fd5b6107f282826115d8565b5050565b610800338261154e565b50565b61080c33610ce6565b158015610838575033600090815260066020526040902054610836906001600160a01b0316610ce6565b155b1561085657604051633e34a41b60e21b815260040160405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166000908152602081905260409020548181106108c6576108c17f000000000000000000000000000000000000000000000000000000000000000033846113c9565b610904565b6108f17f000000000000000000000000000000000000000000000000000000000000000033836113c9565b610904336108ff8385611b92565b6115d8565b604080518381526020810183905233917f68968dce3e47f9519d4b1886045d266b13a87545a0831788b35556bbf8abb6c7910160405180910390a25050565b61094c33610ce6565b158015610978575033600090815260066020526040902054610976906001600160a01b0316610ce6565b155b1561099657604051633e34a41b60e21b815260040160405180910390fd5b6107f2828261154e565b6109a933610ce6565b1580156109d55750336000908152600660205260409020546109d3906001600160a01b0316610ce6565b155b156109f357604051633e34a41b60e21b815260040160405180910390fd5b6000620f424083610a048483611ba5565b610a0e9190611ba5565b610a1e9063ffffffff1686611b59565b610a289190611b70565b9050610a3485826115d8565b610a627f00000000000000000000000000000000000000000000000000000000000000006108ff8387611b92565b610a7263ffffffff841685611b59565b60046000828254610a839190611bc2565b90915550505050505050565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166000908152602081905260408120546000610ad2610fc3565b9050808211610ae45760009250505090565b610aee8183611b92565b9250505090565b6001600160a01b038516600090815260056020526040902054421115610b2e5760405163ecdd1c2960e01b815260040160405180910390fd5b60405163352e3a8360e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063352e3a8390610b7e90339088908890600401611bd5565b60006040518083038186803b158015610b9657600080fd5b505afa158015610baa573d6000803e3d6000fd5b505050506001600160a01b03851660008181526005602052604080822091909155517fd60c86e83346fdbe3124cb7d1cba32973a9f62d05c4ec801bfe6c09d1038038190610bfb9085908590611c58565b60405180910390a25050505050565b6000610c1533610ce6565b158015610c41575033600090815260066020526040902054610c3f906001600160a01b0316610ce6565b155b15610c5f57604051633e34a41b60e21b815260040160405180910390fd5b6000610c6b84846111dc565b9050610c7d63ffffffff841682611b59565b60046000828254610c8e9190611b92565b90915550610cc890507f000000000000000000000000000000000000000000000000000000000000000033610cc38785611b92565b6113c9565b610cd2338261154e565b9392505050565b60006105a53384846113c9565b6001600160a01b038116600090815260056020526040812054158015906105a95750506001600160a01b031660009081526005602052604090205442101590565b610d3033610ce6565b610d4d57604051633e34a41b60e21b815260040160405180910390fd5b6001600160a01b0316600090815260066020526040902080546001600160a01b03191633179055565b610d7f33610ce6565b158015610dab575033600090815260066020526040902054610da9906001600160a01b0316610ce6565b155b15610dc957604051633e34a41b60e21b815260040160405180910390fd5b610dd3338361154e565b6000610de563ffffffff831684611b59565b9050600454811115610e3957600454604080519182526000602083015233917fccd7238a587ca4ccdab9f52533787066603f50db964bc819b82ad7e7036e1769910160405180910390a26000600455505050565b8060046000828254610e4b9190611b92565b909155505060045460405133917fccd7238a587ca4ccdab9f52533787066603f50db964bc819b82ad7e7036e176991610e8c91858252602082015260400190565b60405180910390a2505050565b7f0000000000000000000000000000000000000000000000000000000000000000841015610eda57604051631260d0af60e31b815260040160405180910390fd5b683635c9adc5dea00000831015610f045760405163732f941360e01b815260040160405180910390fd5b6001600160a01b03851660009081526005602052604090205415610f3b57604051630ea075bf60e21b815260040160405180910390fd5b610f66337f0000000000000000000000000000000000000000000000000000000000000000856113c9565b610f708442611bc2565b6001600160a01b038616600081815260056020526040908190209290925590517f97326258efdae63280617ca33884e507791c2abeed7b82acd77f1853394ef94b90610bfb908790879087908790611c74565b6000620f4240600454610fd69190611b70565b905090565b428410156110305760405162461bcd60e51b815260206004820152601760248201527f5045524d49545f444541444c494e455f4558504952454400000000000000000060448201526064015b60405180910390fd5b6000600161103c61073c565b6001600160a01b038a811660008181526003602090815260409182902080546001810190915582517f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c98184015280840194909452938d166060840152608083018c905260a083019390935260c08083018b90528151808403909101815260e08301909152805192019190912061190160f01b6101008301526101028201929092526101228101919091526101420160408051601f198184030181528282528051602091820120600084529083018083525260ff871690820152606081018590526080810184905260a0016020604051602081039080840390855afa158015611148573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381161580159061117e5750876001600160a01b0316816001600160a01b0316145b6111bb5760405162461bcd60e51b815260206004820152600e60248201526d24a72b20a624a22fa9a4a3a722a960911b6044820152606401611027565b6111c6818888611367565b5050505050505050565b6000610cd2838361166d565b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016600090815260208190526040812054600061121f610fc3565b90506000818310611236578463ffffffff16611251565b816112478463ffffffff8816611b59565b6112519190611b70565b905061126081620f4240611b92565b61126d87620f4240611b59565b6112779190611b70565b9695505050505050565b60025415801561131057507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166318160ddd6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156112ea573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061130e9190611c94565b155b61131957600080fd5b6001600160a01b038316600081815260056020526040808220429055517f97326258efdae63280617ca33884e507791c2abeed7b82acd77f1853394ef94b91610e8c91819087908790611c74565b6001600160a01b0383811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591015b60405180910390a3505050565b6001600160a01b0382166113dc57600080fd5b6001600160a01b03831660009081526020819052604090205481111561143f576001600160a01b0383166000818152602081905260409081902054905163391434e360e21b81526004810192909252602482015260448101829052606401611027565b6001600160a01b03831660009081526020819052604081208054839290611467908490611b92565b90915550506001600160a01b03821660009081526020819052604081208054839290611494908490611bc2565b92505081905550816001600160a01b0316836001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516113bc91815260200190565b60006114ec848461166d565b9050600160ff1b811015611548578181101561153457604051637dc7a0d960e11b81526001600160a01b03851660048201526024810182905260448101839052606401611027565b61154884846115438585611b92565b611367565b50505050565b80600260008282546115609190611b92565b90915550506001600160a01b0382166000908152602081905260408120805483929061158d908490611b92565b90915550506040518181526000906001600160a01b038416907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906020015b60405180910390a35050565b6001600160a01b0382166115eb57600080fd5b80600260008282546115fd9190611bc2565b90915550506001600160a01b0382166000908152602081905260408120805483929061162a908490611bc2565b90915550506040518181526001600160a01b038316906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906020016115cc565b6001600160a01b03808316600090815260016020908152604080832093851683529290529081205480156116a25790506105a9565b6116ab83610ce6565b806116d557506001600160a01b038084166000908152600660205260409020546116d59116610ce6565b8061171157507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316836001600160a01b0316145b1561172357600160ff1b9150506105a9565b60009150506105a9565b5092915050565b600060208083528351808285015260005b8181101561176157858101830151858201604001528201611745565b506000604082860101526040601f19601f8301168501019250505092915050565b80356001600160a01b038116811461179957600080fd5b919050565b600080604083850312156117b157600080fd5b6117ba83611782565b946020939093013593505050565b803563ffffffff8116811461179957600080fd5b600080604083850312156117ef57600080fd5b823591506117ff602084016117c8565b90509250929050565b60008060006060848603121561181d57600080fd5b61182684611782565b925061183460208501611782565b9150604084013590509250925092565b60008060006060848603121561185957600080fd5b61186284611782565b925060208401359150611877604085016117c8565b90509250925092565b60006020828403121561189257600080fd5b5035919050565b6000602082840312156118ab57600080fd5b610cd282611782565b600080600080608085870312156118ca57600080fd5b6118d385611782565b9350602085013592506118e8604086016117c8565b91506118f6606086016117c8565b905092959194509250565b60008083601f84011261191357600080fd5b50813567ffffffffffffffff81111561192b57600080fd5b60208301915083602082850101111561194357600080fd5b9250929050565b60008060008060006060868803121561196257600080fd5b61196b86611782565b9450602086013567ffffffffffffffff8082111561198857600080fd5b818801915088601f83011261199c57600080fd5b8135818111156119ab57600080fd5b8960208260051b85010111156119c057600080fd5b6020830196508095505060408801359150808211156119de57600080fd5b506119eb88828901611901565b969995985093965092949392505050565b600080600080600060808688031215611a1457600080fd5b611a1d86611782565b94506020860135935060408601359250606086013567ffffffffffffffff811115611a4757600080fd5b6119eb88828901611901565b600080600080600080600060e0888a031215611a6e57600080fd5b611a7788611782565b9650611a8560208901611782565b95506040880135945060608801359350608088013560ff81168114611aa957600080fd5b9699959850939692959460a0840135945060c09093013592915050565b60008060408385031215611ad957600080fd5b611ae283611782565b91506117ff60208401611782565b600080600060408486031215611b0557600080fd5b611b0e84611782565b9250602084013567ffffffffffffffff811115611b2a57600080fd5b611b3686828701611901565b9497909650939450505050565b634e487b7160e01b600052601160045260246000fd5b80820281158282048414176105a9576105a9611b43565b600082611b8d57634e487b7160e01b600052601260045260246000fd5b500490565b818103818111156105a9576105a9611b43565b63ffffffff82811682821603908082111561172d5761172d611b43565b808201808211156105a9576105a9611b43565b6001600160a01b03848116825260406020808401829052908301849052600091859160608501845b87811015611c225783611c0f86611782565b1682529382019390820190600101611bfd565b5098975050505050505050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b602081526000611c6c602083018486611c2f565b949350505050565b848152836020820152606060408201526000611277606083018486611c2f565b600060208284031215611ca657600080fd5b505191905056fea26469706673582212201a4a5479f6dde50a85897e6d6b75478511fd4ae86229beb58f17248d2ecd57d764736f6c63430008140033",
  "devdoc": {
    "events": {
      "Approval(address,address,uint256)": {
        "details": "Emitted when the allowance of a `spender` for an `owner` is set by a call to `approve`. `value` is the new allowance."
      },
      "Transfer(address,address,uint256)": {
        "details": "Emitted when `value` tokens are moved from one account (`from`) to another (`to`). Note that `value` may be zero."
      }
    },
    "kind": "dev",
    "methods": {
      "allowance(address,address)": {
        "details": "See `IERC20.allowance`."
      },
      "approve(address,uint256)": {
        "details": "See `IERC20.approve`. Requirements: - `spender` cannot be the zero address."
      },
      "balanceOf(address)": {
        "details": "See `IERC20.balanceOf`."
      },
      "denyMinter(address,address[],string)": {
        "details": "Calling this function is relatively cheap thanks to the deletion of a storage slot."
      },
      "equity()": {
        "details": "Note that the equity contract technically holds both the minter reserve as well as the equity, so the minter reserve must be subtracted. All fees and other kind of income is added to the Equity contract and essentially constitutes profits attributable to the pool share holders."
      },
      "minterReserve()": {
        "details": "The minter reserve can be used to cover losses after the equity holders have been wiped out."
      },
      "registerPosition(address)": {
        "details": "It is assumed that the responsible minter that registers the position ensures that the position can be trusted."
      },
      "suggestMinter(address,uint256,uint256,string)": {
        "details": "The caller has to pay an application fee that is irrevocably lost even if the new minter is vetoed. The caller must assume that someone will veto the new minter unless there is broad consensus that the new minter adds value to the Frankencoin system. Complex proposals should have application periods and applications fees above the minimum. It is assumed that over time, informal ways to coordinate on new minters emerge. The message parameter might be useful for initiating further communication. Maybe it contains a link to a website describing the proposed minter.",
        "params": {
          "_applicationFee": "The fee paid by the caller, at least MIN_FEE",
          "_applicationPeriod": "The time others have to veto the suggestion, at least MIN_APPLICATION_PERIOD",
          "_message": "An optional human readable message to everyone watching this contract",
          "_minter": "An address that is given the permission to mint Frankencoins"
        }
      },
      "totalSupply()": {
        "details": "See `IERC20.totalSupply`."
      },
      "transfer(address,uint256)": {
        "details": "See `IERC20.transfer`. Requirements: - `recipient` cannot be the zero address. - the caller must have a balance of at least `amount`."
      },
      "transferFrom(address,address,uint256)": {
        "details": "See `IERC20.transferFrom`. Emits an `Approval` event indicating the updated allowance. This is not required by the EIP. See the note at the beginning of `ERC20`; Requirements: - `sender` and `recipient` cannot be the zero address. - `sender` must have a balance of at least `value`. - the caller must have allowance for `sender`'s tokens of at least `amount`."
      }
    },
    "title": "FrankenCoin",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "MIN_FEE()": {
        "notice": "Minimal fee and application period when suggesting a new minter."
      },
      "burn(uint256)": {
        "notice": "Anyone is allowed to burn their ZCHF."
      },
      "burnFrom(address,uint256)": {
        "notice": "Burn someone elses ZCHF."
      },
      "burnFromWithReserve(address,uint256,uint32)": {
        "notice": "Burns the target amount taking the tokens to be burned from the payer and the payer's reserve. Only use this method for tokens also minted by the caller with the same _reservePPM. Example: the calling contract has previously minted 100 ZCHF with a reserve ratio of 20% (i.e. 200000 ppm). To burn half of that again, the minter calls burnFrom with a target amount of 50 ZCHF. Assuming that reserves are only 90% covered, this call will deduct 41 ZCHF from the payer's balance and 9 from the reserve, while reducing the minter reserve by 10."
      },
      "burnWithReserve(uint256,uint32)": {
        "notice": "Burns the provided number of tokens plus whatever reserves are associated with that amount given the reserve requirement. The caller is only allowed to use this method for tokens also minted through the caller with the same _reservePPM amount. Example: the calling contract has previously minted 100 ZCHF with a reserve ratio of 20% (i.e. 200000 ppm). Now they have 41 ZCHF that they do not need so they decide to repay that amount. Assuming the reserves are only 90% covered, the call to burnWithReserve will burn the 41 plus 9 from the reserve, reducing the outstanding 'debt' of the caller by 50 ZCHF in total. This total is returned by the method so the caller knows how much less they owe."
      },
      "burnWithoutReserve(uint256,uint32)": {
        "notice": "Burn that amount without reclaiming the reserve, but freeing it up and thereby essentially donating it to the pool share holders. This can make sense in combination with 'notifyLoss', i.e. when it is the pool share holders that bear the risk and depending on the outcome they make a profit or a loss. Design rule: Minters calling this method are only allowed to so for tokens amounts they previously minted with the same _reservePPM amount. For example, if someone minted 50 ZCHF earlier with a 20% reserve requirement (200000 ppm), they got 40 ZCHF and paid 10 ZCHF into the reserve. Now they want to repay the debt by burning 50 ZCHF. When doing so using this method, 50 ZCHF get burned and on top of that, 10 ZCHF previously assigned to the minter's reserved are reassigned to the pool share holders."
      },
      "calculateAssignedReserve(uint256,uint32)": {
        "notice": "Calculates the reserve attributable to someone who minted the given amount with the given reserve requirement. Under normal circumstances, this is just the reserver requirement multiplied by the amount. However, after a severe loss of capital that burned into the minter's reserve, this can also be less than that."
      },
      "calculateFreedAmount(uint256,uint32)": {
        "notice": "Calculate the amount that is freed when returning amountExcludingReserve given a reserve ratio of reservePPM, taking into account potential losses. Example values in the comments."
      },
      "constructor": {
        "notice": "Initiates the Frankencoin with the provided minimum application period for new plugins in seconds, for example 10 days, i.e. 3600*24*10 = 864000"
      },
      "denyMinter(address,address[],string)": {
        "notice": "Qualified pool share holders can deny minters during the application period."
      },
      "equity()": {
        "notice": "The amount of equity of the Frankencoin system in ZCHF, owned by the holders of Frankencoin Pool Shares."
      },
      "getPositionParent(address)": {
        "notice": "Returns the address of the minter that created this position or null if the provided address is unknown."
      },
      "isMinter(address)": {
        "notice": "Returns true if the address is an approved minter."
      },
      "mintWithReserve(address,uint256,uint32,uint32)": {
        "notice": "Mints the provided amount of ZCHF to the target address, automatically forwarding the minting fee and the reserve to the right place."
      },
      "minterReserve()": {
        "notice": "The reserve provided by the owners of collateralized positions."
      },
      "minters(address)": {
        "notice": "Map of minters to approval time stamps. If the time stamp is in the past, the minter contract is allowed to mint Frankencoins."
      },
      "notifyLoss(uint256)": {
        "notice": "Notify the Frankencoin that a minter lost economic access to some coins. This does not mean that the coins are literally lost. It just means that some ZCHF will likely never be repaid and that in order to bring the system back into balance, the lost amount of ZCHF must be removed from the reserve instead. For example, if a minter printed 1 million ZCHF for a mortgage and the mortgage turned out to be unsound with the house only yielding 800'000 in the subsequent auction, there is a loss of 200'000 that needs to be covered by the reserve."
      },
      "positions(address)": {
        "notice": "List of positions that are allowed to mint and the minter that registered them."
      },
      "registerPosition(address)": {
        "notice": "Allows minters to register collateralized debt positions, thereby giving them the ability to mint Frankencoins."
      },
      "reserve()": {
        "notice": "The contract that holds the reserve."
      },
      "suggestMinter(address,uint256,uint256,string)": {
        "notice": "Publicly accessible method to suggest a new way of minting Frankencoin."
      }
    },
    "notice": "The Frankencoin (ZCHF) is an ERC-20 token that is designed to track the value of the Swiss franc. It is not upgradable, but open to arbitrary minting plugins. These are automatically accepted if none of the qualified pool share holders casts a veto, leading to a flexible but conservative governance.",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 7967,
        "contract": "contracts/Frankencoin.sol:Frankencoin",
        "label": "_balances",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 7973,
        "contract": "contracts/Frankencoin.sol:Frankencoin",
        "label": "_allowances",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_address,t_mapping(t_address,t_uint256))"
      },
      {
        "astId": 7981,
        "contract": "contracts/Frankencoin.sol:Frankencoin",
        "label": "_totalSupply",
        "offset": 0,
        "slot": "2",
        "type": "t_uint256"
      },
      {
        "astId": 8365,
        "contract": "contracts/Frankencoin.sol:Frankencoin",
        "label": "nonces",
        "offset": 0,
        "slot": "3",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 1143,
        "contract": "contracts/Frankencoin.sol:Frankencoin",
        "label": "minterReserveE6",
        "offset": 0,
        "slot": "4",
        "type": "t_uint256"
      },
      {
        "astId": 1148,
        "contract": "contracts/Frankencoin.sol:Frankencoin",
        "label": "minters",
        "offset": 0,
        "slot": "5",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 1153,
        "contract": "contracts/Frankencoin.sol:Frankencoin",
        "label": "positions",
        "offset": 0,
        "slot": "6",
        "type": "t_mapping(t_address,t_address)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_mapping(t_address,t_address)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => address)",
        "numberOfBytes": "32",
        "value": "t_address"
      },
      "t_mapping(t_address,t_mapping(t_address,t_uint256))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(address => uint256))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_address,t_uint256)"
      },
      "t_mapping(t_address,t_uint256)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}